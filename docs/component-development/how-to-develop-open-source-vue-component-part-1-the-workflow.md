# 组件研发指南（一）：研发流程

## 目的

组件产出流程化，规范化。组件必须设计先行，之后再走私服流程、开源流程。

## 研发流程

组件研发整体分以下几步：

- 确定组件适用场景（不能脱离场景谈技术）
- 参考已有案例，或社区已有的组件（避免重复造轮子）
- 设计功能实现（设计先行）
- 编写测试用例（测试驱动）
- 制定研发迭代（敏捷开发）

### 场景
在组件开发的第一步，是根据实践经验以及相关业务，抽象定义出相应的场景。 脱离了场景，功能规划再强大也没有用。

这既是避免过度设计的手段，也是后续进行功能设计、测试编写以及迭代制定的基础。

在这一步，需要确定组件名称。

### 参考
为什么要参考，而不是自己从头开始撸？因为我们要学会站在巨人的肩膀上，而不是一切都从零开始。

动手前，先看看已有的东西:

- 如果已有的成果完全适合我们的场景，那拿来用就是了
- 纵然已有的东西不符合场景，但也有借鉴意义，我们可以基于它来改造

这样做，是为了避免重复的劳动，提高我们的开发效率。

记住，don't reinvent the wheel

### 设计
结合场景、测试用例，就可以开始设计组件的api，需要梳理逻辑，理清思路，并输出脑图，示例如下：
![](https://cdn.nlark.com/yuque/0/2018/png/160590/1545364591623-b1cc153b-e619-4483-b1e7-9cd0637886b1.png#align=left&display=inline&height=452&originHeight=1308&originWidth=1080&status=done&width=373)

每实现一个功能点，增加一个api，需要补充相应文档。

### 测试
根据组件应有的能力，提前想好测试用例，践行“测试先行”的理念，示例如下：
![](https://cdn.nlark.com/yuque/0/2018/png/160590/1545365192683-219ca130-94ee-41d7-8006-5374100715eb.png#align=left&display=inline&height=551&originHeight=1259&originWidth=1080&status=done&width=473)

开发时需要写stories展示组件的功能，确保每个story都是可以运行的。

### 迭代
有了上面的输出，就可以划分优先级，制定迭代顺序。示例如下：

![](https://cdn.nlark.com/yuque/0/2018/png/160590/1545364558050-5684b5e0-1ec3-4c30-93c7-df2852b5cfe5.png?x-oss-process=image/watermark,type_d3F5LW1pY3JvaGVp,size_10,text_5ru05pmu56eR5oqA,color_FFFFFF,shadow_50,t_80,g_se,x_10,y_10#align=left&display=inline&height=373&originHeight=801&originWidth=1778&status=done&width=827)

之后再在gitlab并建立todo，并为todo标记好数字，如1,2,3，则这些todo的数字代表了开发迭代的顺序，组件开发者必须严格按照此顺序进行开发，如有异议，请及时提出，切勿乱序开发，导致混乱。

之后就要评估工作量，圈定一个时间，按照迭代计划去开发。

这样做是为了确保组件开发出来的功能可以最小闭环，而且成本也可控。也即假设5天要实现三个功能点，就算在第5天的时候，只完成两个功能点，也能保证组件是可用的。

要培养时间成本意识。

