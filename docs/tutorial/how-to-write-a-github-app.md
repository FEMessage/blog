# ğŸ¤–å¦‚ä½•å†™ä¸€ä¸ªGithub App

## æ¸©é¦¨æç¤º

åœ¨ç»§ç»­æ­£æ–‡å‰ï¼Œå…ˆæ¾„æ¸…ä¸€ä¸‹ï¼š

1. Github App æ˜¯éœ€è¦éƒ¨ç½²çš„ï¼ŒGithub å¹¶æ²¡æœ‰æä¾›æ‰˜ç®¡æœåŠ¡ã€‚
1. åœ¨ Github Marketplace ä¸Šæ¶å¹¶éä½¿ç”¨ Github App çš„å¿…è¦æ¡ä»¶ã€‚ä¹Ÿå³ï¼Œæ²¡æœ‰åœ¨ä¸Šé¢å±•ç¤ºï¼Œä½ ä¸€æ ·å¯ä»¥å®‰è£…ä½¿ç”¨è‡ªå·±çš„ Github Appã€‚


## å¿«é€Ÿå¼€å§‹
1. npx create-probot-app your-app
1. cd your-app
1. yarn
1. yarn dev
1. register a Github App
1. install the Github App

å®é™…å¼€å‘å¹¶å·²ä¸Šæ¶çš„Appï¼Œç”¨äºç»™ pull request è‡ªåŠ¨æ‰“æ ‡ç­¾ï¼š[https://github.com/marketplace/auto-add-label](https://github.com/marketplace/auto-add-label)

å¼€æºåœ°å€ï¼š[https://github.com/levy9527/auto-add-label](https://github.com/levy9527/auto-add-label)

## å®‰è£…åº”ç”¨
è¿›å…¥ [https://github.com/settings/apps](https://github.com/settings/apps)


![image](https://user-images.githubusercontent.com/9384365/63631087-fb77dd80-c654-11e9-9ffd-bdd776f15af6.png)


ç‚¹å‡»å®‰è£…

![image](https://user-images.githubusercontent.com/9384365/63631075-e0a56900-c654-11e9-8395-3e4fda6b1ee1.png)

![image](https://user-images.githubusercontent.com/9384365/63631094-07639f80-c655-11e9-9545-bababf311129.png)

## ä¿®æ”¹æƒé™
è¿›å…¥[https://github.com/settings/apps](https://github.com/settings/apps)

![image](https://user-images.githubusercontent.com/9384365/63631100-23674100-c655-11e9-8250-92195a0c0eb3.png)


![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbpfffxfj318u0bcmzg.jpg)

åˆ«å¿˜äº†ï¼Œæ£€æŸ¥ä¸‹æ˜¯å¦è®¢é˜…äº†ç›¸å…³äº‹ä»¶
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbrc2ox5j31620q479d.jpg)
å¦‚æœåœ¨åˆå§‹åŒ–åï¼Œå¹¶ä¸”å·²ç»æœ‰ç”¨æˆ·(æ¯”å¦‚è‡ªå·±)å®‰è£…äº† Github Appï¼Œå†æ›´æ”¹æƒé™ï¼Œåˆ™éœ€é‡æ–°è·å¾—ç”¨æˆ·çš„æˆæƒ

é‡æ–°æˆæƒå…¥å£å¦‚ä¸‹
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbrnsvrnj31j60di40u.jpg)

è¿›å…¥åä¼šæœ‰æç¤º
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbs0ocn5j317w0i80va.jpg)

é‡æ–°æˆæƒ
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbshnm2lj30xu0u077s.jpg)

## webhooks
å¯ä»¥åœ¨ Github App çš„ Advanced é¡µé¢ä¸­æŸ¥çœ‹ webhooks æ¥æ”¶æƒ…å†µ
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbsr62cjj31oe0om0xx.jpg)

å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ [https://smee.io](https://smee.io/) æŸ¥çœ‹
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbsxqy08j311q0u0gpn.jpg)

## å¼‚å¸¸
### 400
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbt74iw1j313a07amyy.jpg)

æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `.env` ï¼Œå¤åˆ¶ `WEBHOOK_SECRET` çš„å€¼

è¿›å…¥ Github App è®¾ç½®é¡µ
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbtgm6tbj311g0bewfx.jpg)

ä¿®æ”¹ Webhook secret åä¿å­˜
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbtt0jo2j30zy0g6q53.jpg)

æ ¹æ®ç»éªŒï¼Œæ¯æ¬¡ä¿®æ”¹ Webhook æ—¶ï¼Œæœ€å¥½åŒæ—¶å†ç¼–è¾‘ä¸€æ¬¡ Webhook secretï¼ˆå³ä½¿å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼‰ï¼Œä»¥é¿å…ä»¥ä¸Šæƒ…å†µçš„å‘ç”Ÿã€‚
![image.png](https://tva1.sinaimg.cn/large/006y8mN6gy1g6mbu1ucz7j30u608s0tm.jpg)

## éƒ¨ç½²
æ¨èä½¿ç”¨ Heroku:

- [å®‰è£… Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli#download-and-install)
- [éƒ¨ç½²æŒ‡å—](https://probot.github.io/docs/deployment/#heroku)

éœ€è¦æŒ‡å‡ºçš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨ Heroku æ—¶ç½‘ç»œä½“éªŒç¨å·®ï¼Œä¸çŸ¥é“æ˜¯å¦æ˜¯æˆ‘çš„ç½‘ç»œé—®é¢˜ï¼Œè¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š

1. æˆ‘çš„ç¿»å¢™å·¥å…·éœ€è¦åˆ‡æ¢ä¸º è“ç¯ï¼Œå¦åˆ™ Heroku Dashboard å‡ ä¹æ— æ³•æ‰“å¼€
1. åœ¨ iTerm2 é‡Œä½¿ç”¨ Heroku CLI å‘½ä»¤æ—¶ï¼Œå¾ˆå®¹æ˜“å‡ºç°æŠ¥é”™ `ENOTFOUND: getaddrinfo ENOTFOUND api.heroku.com api.heroku.com:443` ï¼Œéœ€è¦å¤šæ¬¡å°è¯•ï¼Œé è¿æ°”æˆåŠŸ

å¯ä»¥æ”¾å¿ƒçš„æ˜¯ï¼Œéƒ¨ç½²åçš„åº”ç”¨æœ¬èº«ï¼Œæ˜¯å¾ˆç¨³å®šçš„ã€‚

## å‚è€ƒ

- [https://probot.github.io/docs/](https://probot.github.io/docs/)
- [https://developer.github.com/webhooks/](https://developer.github.com/webhooks/)
- [https://github.blog/2011-10-19-all-of-the-hooks/](https://github.blog/2011-10-19-all-of-the-hooks/)
