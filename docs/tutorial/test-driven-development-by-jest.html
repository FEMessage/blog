<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>âœ…ä½¿ç”¨jestè¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘ | FEMessage blog</title>
    <meta name="description" content="things every member should konw">
    <link rel="icon" href="https://avatars3.githubusercontent.com/u/39977793?s=200&amp;v=4">
    
    <link rel="preload" href="/blog/assets/css/0.styles.7a18dcc6.css" as="style"><link rel="preload" href="/blog/assets/js/app.79b0d2e1.js" as="script"><link rel="preload" href="/blog/assets/js/2.acf68d8b.js" as="script"><link rel="preload" href="/blog/assets/js/39.63e6dd89.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b8813f10.js"><link rel="prefetch" href="/blog/assets/js/11.8d493694.js"><link rel="prefetch" href="/blog/assets/js/12.ec5bef1d.js"><link rel="prefetch" href="/blog/assets/js/13.135a16eb.js"><link rel="prefetch" href="/blog/assets/js/14.84a32c94.js"><link rel="prefetch" href="/blog/assets/js/15.d4c929e9.js"><link rel="prefetch" href="/blog/assets/js/16.62e9b8db.js"><link rel="prefetch" href="/blog/assets/js/17.b3257d2b.js"><link rel="prefetch" href="/blog/assets/js/18.f93dc4eb.js"><link rel="prefetch" href="/blog/assets/js/19.c1935fcb.js"><link rel="prefetch" href="/blog/assets/js/20.fa546649.js"><link rel="prefetch" href="/blog/assets/js/21.a87c2187.js"><link rel="prefetch" href="/blog/assets/js/22.f4e546eb.js"><link rel="prefetch" href="/blog/assets/js/23.42478a83.js"><link rel="prefetch" href="/blog/assets/js/24.a44154be.js"><link rel="prefetch" href="/blog/assets/js/25.02d2f3e0.js"><link rel="prefetch" href="/blog/assets/js/26.4a911dd3.js"><link rel="prefetch" href="/blog/assets/js/27.b477d326.js"><link rel="prefetch" href="/blog/assets/js/28.3882096c.js"><link rel="prefetch" href="/blog/assets/js/29.5dc6799a.js"><link rel="prefetch" href="/blog/assets/js/3.54a4317f.js"><link rel="prefetch" href="/blog/assets/js/30.dd1326dd.js"><link rel="prefetch" href="/blog/assets/js/31.a36c5936.js"><link rel="prefetch" href="/blog/assets/js/32.96606455.js"><link rel="prefetch" href="/blog/assets/js/33.59cd61fd.js"><link rel="prefetch" href="/blog/assets/js/34.1ea92878.js"><link rel="prefetch" href="/blog/assets/js/35.5d4fccb1.js"><link rel="prefetch" href="/blog/assets/js/36.3df612db.js"><link rel="prefetch" href="/blog/assets/js/37.6d412fd9.js"><link rel="prefetch" href="/blog/assets/js/38.26b5fe1c.js"><link rel="prefetch" href="/blog/assets/js/4.78dc510e.js"><link rel="prefetch" href="/blog/assets/js/40.57f2736e.js"><link rel="prefetch" href="/blog/assets/js/41.9855ab16.js"><link rel="prefetch" href="/blog/assets/js/5.e191f0f8.js"><link rel="prefetch" href="/blog/assets/js/6.ad10d0b5.js"><link rel="prefetch" href="/blog/assets/js/7.dd64474c.js"><link rel="prefetch" href="/blog/assets/js/8.a962870c.js"><link rel="prefetch" href="/blog/assets/js/9.4d8e258e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.7a18dcc6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">FEMessage blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/FEMessage/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/FEMessage/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¼–ç </span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docs/coding/basic-knowledge.html" class="sidebar-link">å‰ç«¯åŸºç¡€</a></li><li><a href="/blog/docs/coding/before-coding.html" class="sidebar-link">ç¼–ç¨‹ä¿®å…»</a></li><li><a href="/blog/docs/coding/clean-code-tips.html" class="sidebar-link">ç¼–ç æŠ€å·§</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¼–ç¨‹æ•…äº‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docs/coding-story/achieve-commitment-and-deliver-available-software.html" class="sidebar-link">å±¥è¡Œæ‰¿è¯ºï¼Œäº¤ä»˜å¯ç”¨çš„åŠŸèƒ½</a></li><li><a href="/blog/docs/coding-story/how-can-we-fix-200-bugs-in-a-week.html" class="sidebar-link">ä¸€å‘¨æ¶ˆç­200ä¸ªbug</a></li><li><a href="/blog/docs/coding-story/just-do-it.html" class="sidebar-link">æ‰§è¡ŒåŠ›</a></li><li><a href="/blog/docs/coding-story/practice-collective-ownership.html" class="sidebar-link">ç¼–ç¨‹æ¥åŠ›</a></li><li><a href="/blog/docs/coding-story/teamwork.html" class="sidebar-link">å›¢é˜Ÿåä½œ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç»„ä»¶ç ”å‘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docs/component-development/how-to-develop-open-source-vue-component-part-1-the-workflow.html" class="sidebar-link">ç»„ä»¶ç ”å‘æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šç ”å‘æµç¨‹</a></li><li><a href="/blog/docs/component-development/how-to-develop-open-source-vue-component-part-2-hosting-in-private-registry.html" class="sidebar-link">ç»„ä»¶ç ”å‘æŒ‡å—ï¼ˆäºŒï¼‰ï¼šç§æœæ‰˜ç®¡</a></li><li><a href="/blog/docs/component-development/how-to-develop-open-source-vue-component-part-3-the-open-source-guide.html" class="sidebar-link">ç»„ä»¶ç ”å‘æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šå¼€æºåä½œ</a></li><li><a href="/blog/docs/component-development/how-to-develop-open-source-vue-component-part-4-thinking-improvement.html" class="sidebar-link">ç»„ä»¶ç ”å‘æŒ‡å—ï¼ˆå››ï¼‰ï¼šæ€ç»´æå‡</a></li><li><a href="/blog/docs/component-development/how-to-develop-open-source-vue-component-part-5-some-tips-may-help.html" class="sidebar-link">ç»„ä»¶ç ”å‘æŒ‡å—ï¼ˆäº”ï¼‰ï¼šåŸºç¡€æ‹¾é—</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GITæŒ‡å—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docs/git/git-best-pratices.html" class="sidebar-link">GITæœ€ä½³å®è·µ</a></li><li><a href="/blog/docs/git/git-common-commands.html" class="sidebar-link">GITå¸¸ç”¨å‘½ä»¤</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è½¯æŠ€èƒ½</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docs/soft-skill/rules-of-thumb-and-nuggets-of-wisdom.html" class="sidebar-link">ç»éªŒæ³•åˆ™ä¸è‡³ç†åè¨€</a></li><li><a href="/blog/docs/soft-skill/search-tips.html" class="sidebar-link">æœç´¢æŠ€å·§</a></li><li><a href="/blog/docs/soft-skill/the-pyramid-priceple-using-in-github-pr.html" class="sidebar-link">é‡‘å­—å¡”åŸç†åœ¨Github PRä¸­çš„è¿ç”¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æ•™ç¨‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docs/tutorial/a-guide-for-chinese-frontend-developer-dockerizing-your-nodejs-app.html" class="sidebar-link">ğŸ³ä»é›¶å¼€å§‹DockeråŒ–Node.jsåº”ç”¨</a></li><li><a href="/blog/docs/tutorial/best-pratices-to-publish-vue-component-via-npm.html" class="sidebar-link">ğŸ“¦vueç»„ä»¶å‘å¸ƒnpmæœ€ä½³å®è·µ</a></li><li><a href="/blog/docs/tutorial/capture-and-rewrite-https-request.html" class="sidebar-link">ğŸ•¸æ•è·ä¸æ”¹å†™HTTPSè¯·æ±‚</a></li><li><a href="/blog/docs/tutorial/decode-base64-in-utf8.html" class="sidebar-link">ğŸ”è§£ç base64çš„utf-8å­—ç¬¦ä¸²</a></li><li><a href="/blog/docs/tutorial/how-to-write-a-github-app.html" class="sidebar-link">ğŸ¤–å¦‚ä½•å†™ä¸€ä¸ªGithub App</a></li><li><a href="/blog/docs/tutorial/integrate-github-with-netlify-to-preview-changes.html" class="sidebar-link">âš¡ï¸Githubé›†æˆNetlifyï¼šå¿«é€Ÿé¢„è§ˆPR</a></li><li><a href="/blog/docs/tutorial/integrate-github-with-travis-ci-to-auto-deployment.html" class="sidebar-link">ğŸš€Githubé›†æˆTravis CIï¼šè‡ªåŠ¨å‘å¸ƒ</a></li><li><a href="/blog/docs/tutorial/reveal-the-secret-of-a-powerful-tool-to-develop-vue-single-file-compoent.html" class="sidebar-link">ğŸ”¨æ­ç§˜vue-sfc-cliï¼šç»„ä»¶ç ”å‘åˆ©å™¨</a></li><li><a href="/blog/docs/tutorial/setup-an-automated-github-workflow.html" class="sidebar-link">ğŸŒªè‡ªåŠ¨åŒ–çš„Github Workflow</a></li><li><a href="/blog/docs/tutorial/test-driven-development-by-jest.html" class="active sidebar-link">âœ…ä½¿ç”¨jestè¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/docs/tutorial/test-driven-development-by-jest.html#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header"><a href="/blog/docs/tutorial/test-driven-development-by-jest.html#ç¯å¢ƒæ­å»º" class="sidebar-link">ç¯å¢ƒæ­å»º</a></li><li class="sidebar-sub-header"><a href="/blog/docs/tutorial/test-driven-development-by-jest.html#å¼€å‘" class="sidebar-link">å¼€å‘</a></li><li class="sidebar-sub-header"><a href="/blog/docs/tutorial/test-driven-development-by-jest.html#ç»“è®º" class="sidebar-link">ç»“è®º</a></li><li class="sidebar-sub-header"><a href="/blog/docs/tutorial/test-driven-development-by-jest.html#æ‰©å±•" class="sidebar-link">æ‰©å±•</a></li></ul></li><li><a href="/blog/docs/tutorial/use-free-https-service.html" class="sidebar-link">ğŸ”’å…è´¹å¼€å¯HTTPS</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="âœ…ä½¿ç”¨jestè¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘"><a href="#âœ…ä½¿ç”¨jestè¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘" aria-hidden="true" class="header-anchor">#</a> âœ…ä½¿ç”¨jestè¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘</h1> <h2 id="å‰è¨€"><a href="#å‰è¨€" aria-hidden="true" class="header-anchor">#</a> å‰è¨€</h2> <p>æœ¬æ–‡å°†ä½¿ç”¨<a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer">jest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>è¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘çš„ç¤ºä¾‹ï¼Œæºç åœ¨<a href="https://github.com/levy9527/jest-tdd-demo" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚é‡ç‚¹è¯´æ˜åœ¨å¼€å‘ä¸­å¼•å…¥å•å…ƒæµ‹è¯•åå¼€å‘è¿‡ç¨‹ï¼Œä»¥åŠæµ‹è¯•å…ˆè¡Œçš„å¼€å‘æ€è·¯ã€‚</p> <p>æœ¬æ–‡çš„é‡ç‚¹æ˜¯è¿‡ç¨‹ä»¥åŠæ€ç»´æ–¹æ³•ï¼Œæ¡†æ¶ä»¥åŠç”¨æ³•ä¸æ˜¯é‡ç‚¹ã€‚</p> <p>æœ¬æ–‡ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯javascriptï¼Œæ€è·¯å¯¹å…¶ä»–è¯­è¨€ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚</p> <p>æœ¬æ–‡ä¸»è¦ä»¥å‡½æ•°ä½œä¸ºæµ‹è¯•å¯¹è±¡ã€‚</p> <h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" aria-hidden="true" class="header-anchor">#</a> ç¯å¢ƒæ­å»º</h2> <p>å‡è®¾é¡¹ç›®ç»“æ„ä¸º</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">.</span>
â”œâ”€â”€ README.md
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”œâ”€â”€ <span class="token function">test</span>
â””â”€â”€ yarn.lock
</code></pre></div><ul><li>å®‰è£…ä¾èµ–</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>yarn add --dev jest
</code></pre></div><ul><li>æ‰“å¼€package.json,Â ä¿®æ”¹scriptså­—æ®µ</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¹‹åæŠŠæµ‹è¯•æ–‡ä»¶æ”¾åœ¨testæ–‡ä»¶å¤¹ä¸‹ï¼Œä½¿ç”¨<code>yarn test</code>Â å³å¯æŸ¥çœ‹æµ‹è¯•ç»“æœ</p> <h2 id="å¼€å‘"><a href="#å¼€å‘" aria-hidden="true" class="header-anchor">#</a> å¼€å‘</h2> <p>ç°åœ¨è¦å¼€å‘ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥çš„æ–‡ä»¶ååˆ¤æ–­æ˜¯å¦ä¸ºshellæ–‡ä»¶ã€‚</p> <p>å…ˆåšå¥½çº¦å®šï¼š</p> <ol><li>shellæ–‡ä»¶åº”è¯¥ä»¥ <code>.sh</code>Â ç»“å°¾</li> <li>shellæ–‡ä»¶ä¸ä»¥ <code>.</code>Â å¼€å¤´</li> <li>å‡½æ•°ä¸ºåÂ <code>isShellFile</code></li></ol> <p>ä¸‹é¢æ¥çœ‹ä¸‹å¼€å‘æ­¥éª¤æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p> <h3 id="æ–‡ä»¶åˆå§‹åŒ–"><a href="#æ–‡ä»¶åˆå§‹åŒ–" aria-hidden="true" class="header-anchor">#</a> æ–‡ä»¶åˆå§‹åŒ–</h3> <p>åœ¨srcç›®å½•ä¸‹æ–°å»º <code>isShellFile.js</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">touch</span> isShellFile.js
</code></pre></div><p>ç„¶åä¸€è¡Œä»£ç ä¹Ÿä¸å†™ï¼Œåœ¨testç›®å½•ä¸‹æ–°å»º <code>isShellFile.test.js</code></p> <p>å¯ä»¥æ³¨æ„åˆ°ï¼Œæµ‹è¯•æ–‡ä»¶çš„åä¸æºæ–‡ä»¶åç±»ä¼¼ï¼Œåªæ˜¯ä¸­é—´å¤šäº†ä¸ª <code>.test</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">touch</span> isShellFile.test.js
</code></pre></div><h3 id="ç¬¬ä¸€ä¸ªç”¨ä¾‹"><a href="#ç¬¬ä¸€ä¸ªç”¨ä¾‹" aria-hidden="true" class="header-anchor">#</a> ç¬¬ä¸€ä¸ªç”¨ä¾‹</h3> <p>æ‰“å¼€æµ‹è¯•æ–‡ä»¶ <code>test/isShellFile.test.js</code>Â ï¼Œç¼–å†™ç¬¬ä¸€ä¸ªç”¨ä¾‹ï¼Œä¹Ÿæ˜¯æœ€æ™®é€šçš„ä¸€ä¸ª:Â <code>bash.sh</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> isShellFile <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../src/isShellFile'</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'isShellFile'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// è°ƒç”¨å‡½æ•°ï¼ŒæœŸæœ›å®ƒè¿”å›å€¼ä¸º true</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'bash.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿è¡Œ <code>yarn test</code>Â ,Â ç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code> FAIL  test/isShellFile.test.js
  âœ• isShellFile <span class="token punctuation">(</span>2ms<span class="token punctuation">)</span>

  â— isShellFile

    TypeError: isShellFile is not a <span class="token keyword">function</span>
    ^^^

      3 <span class="token operator">|</span> test<span class="token punctuation">(</span><span class="token string">'isShellFile'</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      4 <span class="token operator">|</span>  
    <span class="token operator">&gt;</span> 5 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'bash.sh'</span><span class="token punctuation">))</span>.toBeTruthy<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">|</span>          ^
      6 <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å¤±è´¥æ˜¯æ„æ–™ä¹‹ä¸­çš„ï¼Œå› ä¸º <code>src/isShellFile.js</code>Â ä¸€è¡Œä»£ç ä¹Ÿæ²¡å†™ï¼Œæ‰€ä»¥æµ‹è¯•ä»£ç ä¸­ç¬¬5è¡ŒÂ <code>isShellFile</code>Â æ— æ³•è¿›è¡Œå‡½æ•°è°ƒç”¨ã€‚</p> <p>å®Œå–„æºæ–‡ä»¶<code>src/isShellFile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ · <code>isShellFile</code>Â å°±å¯ä»¥ä½œä¸ºå‡½æ•°è¢«è°ƒç”¨äº†ã€‚</p> <p>å†è¿è¡Œ <code>yarn test</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code> FAIL  test/isShellFile.test.js
  âœ• isShellFile <span class="token punctuation">(</span>7ms<span class="token punctuation">)</span>

  â— isShellFile

    expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toBeTruthy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ^^^
    Received: undefined

      3 <span class="token operator">|</span> test<span class="token punctuation">(</span><span class="token string">'isShellFile'</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      4 <span class="token operator">|</span>   
    <span class="token operator">&gt;</span> 5 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'bash.sh'</span><span class="token punctuation">))</span>.toBeTruthy<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">|</span>                                  ^
      6 <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>åˆæŠ¥é”™äº†ï¼Œä½†è¿™æ¬¡æŠ¥é”™åŸå› è·Ÿä¸Šæ¬¡ä¸åŒï¼Œè¯´æ˜æœ‰è¿›æ­¥ã€‚</p> <p>è¿™æ¬¡æŠ¥é”™åŸå› æ˜¯ï¼ŒæœŸæœ›å‡½æ•°è°ƒç”¨è¿”å›å€¼ä¸ºçœŸ ,Â ä½†å®é™…æ²¡æœ‰è¿”å›çœŸ ã€‚</p> <p>è¿™æ˜¯å½“ç„¶çš„ï¼Œå› ä¸ºåœ¨æºæ–‡ä»¶ä¸­ï¼Œæ ¹æœ¬æ²¡æœ‰å†™è¿”å›è¯­å¥ã€‚</p> <p>ä¸ºäº†è®©æµ‹è¯•é€šè¿‡ï¼Œä¿®æ”¹ <code>src/isShellFile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>  <span class="token keyword">return</span> <span class="token boolean">true</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>è¿è¡Œ <code>yarn test</code>Â ,Â æµ‹è¯•é€šè¿‡äº†ï¼</p> <div class="language-bash extra-class"><pre class="language-bash"><code> PASS  test/isShellFile.test.js
  âœ“ isShellFile <span class="token punctuation">(</span>3ms<span class="token punctuation">)</span>

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.548s
Ran all <span class="token function">test</span> suites.
</code></pre></div><p>æŠŠä¸Šè¿°ä¿®æ”¹ï¼Œæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> add package.json yarn.lock src <span class="token function">test</span>
<span class="token function">git</span> commit -m <span class="token string">'feat: init jest test case'</span>
</code></pre></div><h3 id="ç¬¬äºŒä¸ªç”¨ä¾‹"><a href="#ç¬¬äºŒä¸ªç”¨ä¾‹" aria-hidden="true" class="header-anchor">#</a> ç¬¬äºŒä¸ªç”¨ä¾‹</h3> <p>è§‚å¯Ÿæˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå‘ç°å¤ªç®€å•äº†ï¼Œåªæœ‰æ­£é¢çš„ç”¨ä¾‹ï¼Œæ²¡æœ‰åé¢çš„ã€å¼‚å¸¸çš„ç”¨ä¾‹</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'isShellFile'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'bash.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ <code>test/isShellFile.test.js</code>Â æ·»åŠ ä¸€ä¸ªåé¢çš„ç”¨ä¾‹</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'isShellFile'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'bash.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">+</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'bash.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿è¡Œ <code>yarn test</code></p> <p>(å¯ä»¥å‘ç°ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦åå¤æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œæœ‰ä¸ªå·æ‡’çš„åŠæ³•ï¼Œæ‰§è¡Œ<code>yarn test --watch</code>ï¼Œå³å¯ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹)</p> <div class="language-bash extra-class"><pre class="language-bash"><code> FAIL  test/isShellFile.test.js
  âœ• isShellFile <span class="token punctuation">(</span>6ms<span class="token punctuation">)</span>

  â— isShellFile

    expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ^^^
    Received: <span class="token boolean">true</span>

      4 <span class="token operator">|</span>  
      5 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'bash.sh'</span><span class="token punctuation">))</span>.toBeTruthy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&gt;</span> 6 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'bash.txt'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">|</span>                                   ^
      7 <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æŠ¥é”™äº†ï¼ŒæœŸæœ›è¿”å›å‡ï¼Œä½†å‡½æ•°è¿”å›çš„æ˜¯çœŸã€‚è¿™æ˜¯å› ä¸ºï¼Œæºæ–‡ä»¶ä¸­ï¼Œ <code>isShellFile</code>Â å‡½æ•°æ°¸è¿œè¿”å›çœŸï¼</p> <p>å®Œå–„ <code>src/isShellFile.js</code>Â é€»è¾‘</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">-</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token keyword">return</span> filename<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'.sh'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æµ‹è¯•é€šè¿‡äº†</p> <div class="language-bash extra-class"><pre class="language-bash"><code> PASS  test/isShellFile.test.js
  âœ“ isShellFile <span class="token punctuation">(</span>4ms<span class="token punctuation">)</span>

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.568s
Ran all <span class="token function">test</span> suites.
</code></pre></div><p>æŠŠä¸Šè¿°ä¿®æ”¹æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -am <span class="token string">'fix: å‡½æ•°æ°¸è¿œè¿”å›çœŸçš„bug'</span>
</code></pre></div><h3 id="ç¬¬ä¸‰ä¸ªç”¨ä¾‹"><a href="#ç¬¬ä¸‰ä¸ªç”¨ä¾‹" aria-hidden="true" class="header-anchor">#</a> ç¬¬ä¸‰ä¸ªç”¨ä¾‹</h3> <p>æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªç”¨ä¾‹ï¼Œè¿™æ¬¡è€ƒè™‘ç‰¹æ®Šæƒ…å†µï¼šÂ <code>.sh</code>Â è¿™ç§æ–‡ä»¶ï¼Œä¸ç®—æ˜¯shellæ–‡ä»¶ã€‚</p> <p>ä¿®æ”¹ <code>test/isShellFile.test.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>   <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">&quot;bash.sh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">&quot;bash.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>æµ‹è¯•ä¸é€šè¿‡</p> <div class="language-bash extra-class"><pre class="language-bash"><code> FAIL  test/isShellFile.test.js
  âœ• isShellFile <span class="token punctuation">(</span>8ms<span class="token punctuation">)</span>

  â— isShellFile

    expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ^^^
    Received: <span class="token boolean">true</span>

      5 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">&quot;bash.sh&quot;</span><span class="token punctuation">))</span>.toBeTruthy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      6 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">&quot;bash.txt&quot;</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&gt;</span> 7 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'.sh'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">|</span>                              ^
      8 <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯´æ˜é€»è¾‘å¾…å®Œå–„ï¼Œä¿®æ”¹ <code>src/isShellFile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">-</span>  <span class="token keyword">return</span> filename<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.sh&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token keyword">let</span> index <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.sh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token keyword">return</span> index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æµ‹è¯•é€šè¿‡(ä¸ºç²¾ç®€æ–‡ç« å†…å®¹ï¼Œåé¢ä¸å†å±•ç¤ºæµ‹è¯•é€šè¿‡çš„è¾“å‡º)ï¼Œæäº¤ä»£ç ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -am <span class="token string">'fix: .shåº”è¯¥è¿”å›false'</span>
</code></pre></div><h3 id="ç¬¬å››ä¸ªç”¨ä¾‹"><a href="#ç¬¬å››ä¸ªç”¨ä¾‹" aria-hidden="true" class="header-anchor">#</a> ç¬¬å››ä¸ªç”¨ä¾‹</h3> <p>æŒ‰ç…§ç¬¬ä¸‰ä¸ªç”¨ä¾‹çš„é€»è¾‘ï¼Œ <code>.bash.sh</code>Â ä¹Ÿä¸åº”è¯¥æ˜¯shellæ–‡ä»¶ï¼Œé‚£ä¹ˆå‡½æ•°æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­å‘¢ï¼Œæµ‹è¯•ä¾¿çŸ¥ã€‚</p> <p>ä¿®æ”¹Â <code>test/isShellFile.test.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>   <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">+</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'.bash.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>æµ‹è¯•ä¸é€šè¿‡</p> <div class="language-bash extra-class"><pre class="language-bash"><code> FAIL  test/isShellFile.test.js
  âœ• isShellFile <span class="token punctuation">(</span>3ms<span class="token punctuation">)</span>

  â— isShellFile

    expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ^^^
    Received: <span class="token boolean">true</span>

       6 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">&quot;bash.txt&quot;</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       7 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'.sh'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&gt;</span>  8 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'.bash.sh'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">|</span>                                   ^
       9 <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯´æ˜é€»è¾‘å¾…å®Œå–„ï¼Œä¿®æ”¹Â <code>src/isShellFile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> index <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.sh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">-</span>  <span class="token keyword">return</span> index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token keyword">return</span> <span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æµ‹è¯•é€šè¿‡ï¼Œæäº¤ä»£ç ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -am <span class="token string">'fix: .å¼€å¤´çš„æ–‡ä»¶ä¸ç®—shæ–‡ä»¶'</span>
</code></pre></div><h3 id="ç¬¬äº”ä¸ªç”¨ä¾‹"><a href="#ç¬¬äº”ä¸ªç”¨ä¾‹" aria-hidden="true" class="header-anchor">#</a> ç¬¬äº”ä¸ªç”¨ä¾‹</h3> <p>å†è€ƒè™‘ä¸€ç§æƒ…å†µï¼Œå¦‚æœ <code>.sh</code>Â å‡ºç°åœ¨ä¸­é—´å‘¢ï¼Ÿå¦‚ <code>bash.sh.txt</code>Â , å®ƒä¸åº”è¯¥æ˜¯shellæ–‡ä»¶ï¼Œæ¥çœ‹çœ‹å‡½æ•°æ˜¯å¦èƒ½é€šè¿‡æµ‹è¯•ã€‚</p> <p>ä¿®æ”¹Â <code>test/isShellFile.test.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>   <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'.bash.sh'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">+</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">isShellFile</span><span class="token punctuation">(</span><span class="token string">'bash.sh.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>æµ‹è¯•ä¸é€šè¿‡</p> <div class="language-bash extra-class"><pre class="language-bash"><code> FAIL  test/isShellFile.test.js
  âœ• isShellFile <span class="token punctuation">(</span>5ms<span class="token punctuation">)</span>

  â— isShellFile

    expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ^^^
    Received: <span class="token boolean">true</span>

       7 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'.sh'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
       8 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'.bash.sh'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&gt;</span>  9 <span class="token operator">|</span>   expect<span class="token punctuation">(</span>isShellFile<span class="token punctuation">(</span><span class="token string">'bash.sh.txt'</span><span class="token punctuation">))</span>.toBeFalsy<span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">|</span>                                      ^
      10 <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯´æ˜é€»è¾‘å¾…å®Œå–„ï¼Œä¿®æ”¹Â <code>src/isShellFile.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">-</span>  <span class="token keyword">let</span> index <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.sh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">-</span>  <span class="token keyword">return</span> <span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token keyword">let</span> index <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>  <span class="token keyword">return</span> <span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> filename<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'.sh'</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æµ‹è¯•é€šè¿‡ï¼Œæäº¤ä»£ç ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -am <span class="token string">'fix: .shå¿…é¡»åœ¨ç»“å°¾'</span>
</code></pre></div><h3 id="é‡æ„"><a href="#é‡æ„" aria-hidden="true" class="header-anchor">#</a> é‡æ„</h3> <p>æˆ‘ä»¬æ¥è§‚å¯Ÿç›®å‰ <code>src/isShellFile.js</code>Â çš„å‡½æ•°é€»è¾‘</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> filename<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'.sh'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯¹äº <code>.bashrc</code>Â è¿™æ ·çš„æ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯shellæ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯ä»¥ <code>.</code>Â å¼€å¤´çš„ã€‚</p> <p>åˆ™é€šè¿‡ <code>filename.startsWith('.')</code>Â åˆ¤æ–­å³å¯ï¼Œå‰é¢çš„å‡½æ•°è°ƒç”¨ <code>filename.lastIndexOf(&quot;.&quot;)</code>Â æ˜¯å¤šä½™çš„ã€‚ä¹Ÿå³ï¼Œç›®å‰çš„å‡½æ•°åˆ¤æ–­é€»è¾‘ä¸å¤Ÿç®€æ˜ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ç§ä¼˜åŒ–æ€è·¯ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> filename<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>filename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'.sh'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>æµ‹è¯•é€šè¿‡ï¼Œæäº¤ä»£ç </p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -am <span class="token string">'refactor: ä¼˜åŒ–é€»è¾‘'</span>
</code></pre></div><p>æ³¨æ„ï¼Œè¿™ä¸ªé‡æ„ç¤ºä¾‹çš„é‡ç‚¹æ˜¯ï¼š</p> <ol><li>å…ˆå®ŒæˆåŠŸèƒ½ï¼Œå†é‡æ„</li> <li>é‡æ„å¿…é¡»è¦æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œä¸”ç¡®ä¿é‡æ„åå…¨éƒ¨æµ‹è¯•ç”¨ä¾‹é€šè¿‡</li></ol> <p>è‡³äºå…¶ä»–æ–¹é¢ï¼Œè§ä»è§æ™ºï¼Œå¹¶ä¸æ˜¯é‡ç‚¹ã€‚</p> <h2 id="ç»“è®º"><a href="#ç»“è®º" aria-hidden="true" class="header-anchor">#</a> ç»“è®º</h2> <p>æœ¬æ–‡é€šè¿‡ä»£ç å®ä¾‹ï¼Œè·µè¡Œäº†æµ‹è¯•å…ˆè¡Œçš„ç†å¿µã€‚</p> <p>æ–‡ä¸­çš„ä»£ç å®ç°ä¸æ˜¯é‡ç‚¹ï¼Œè€Œæ˜¯å¼€å‘è¿‡ç¨‹ã€‚</p> <p>æ–‡ä¸­ <a href="#Pv5Ni">æ–‡ä»¶åˆå§‹åŒ–</a>Â åŠ <a href="#Pv5Ni">ç¬¬ä¸€ä¸ªç”¨ä¾‹</a>Â çš„å†…å®¹ï¼Œå°¤å…¶å€¼å¾—å›å‘³ï¼Œå®ƒä½“ç°äº†ä¸¤ä¸ªæ€è·¯ï¼š</p> <ul><li>æ€»æ˜¯åœ¨æœ‰ä¸€ä¸ªå¤±è´¥çš„å•å…ƒæµ‹è¯•åæ‰å¼€å§‹ç¼–ç </li> <li>ç”¨å¿…è¦çš„æœ€å°ä»£ç è®©æµ‹è¯•é€šè¿‡</li></ul> <p>æ€»çš„æ¥çœ‹ï¼ŒTDDæ€»æ˜¯å¤„äºä¸€ä¸ªå¾ªç¯ä¸­ï¼š</p> <ol><li>ç¼–å†™ç”¨ä¾‹</li> <li>æµ‹è¯•å¤±è´¥</li> <li>ç¼–å†™ä»£ç </li> <li>æµ‹è¯•æˆåŠŸ</li> <li>æäº¤ä»£ç </li> <li>é‡å¤ä»¥ä¸Š</li></ol> <p>é€šè¿‡è¿™æ ·ï¼ŒåŠŸèƒ½çš„å®ç°æ¯æ¬¡éƒ½æ˜¯æœ€å°æˆæœ¬çš„ï¼ŒåŠŸèƒ½ä¹Ÿæ˜¯æœ‰æ­¥éª¤åœ°ã€é€šè¿‡è¿­ä»£å®Œæˆçš„ï¼Œè€Œä¸æ˜¯ä¸€æ­¥ç™»å¤©ã€‚</p> <p>æ›´å…³é”®çš„æ˜¯ï¼Œå®Œå–„çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ˜¯å¼€å‘è€…çš„â€œå®ˆæŠ¤å¤©ä½¿â€ï¼Œæœ‰äº†å®ƒä»¬ï¼Œä»¥ååœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œä¿®æ”¹/é‡æ„ä»£ç éƒ½æœ‰äº†å¯é çš„ä¿éšœï¼Œè®©å¼€å‘è€…å¯ä»¥å……æ»¡ä¿¡å¿ƒï¼Œcode with confidenceğŸ˜ï¼</p> <h2 id="æ‰©å±•"><a href="#æ‰©å±•" aria-hidden="true" class="header-anchor">#</a> æ‰©å±•</h2> <h3 id="ä½¿ç”¨babel"><a href="#ä½¿ç”¨babel" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨babel</h3> <p>è¦æƒ³ä½¿ç”¨import/exportè¯­æ³•ï¼Œéœ€è¦å®‰è£…babelç›¸å…³ä¾èµ–</p> <ul><li>å®‰è£…ä¾èµ–</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>yarn add --dev babel-jest @babel/core @babel/preset-env
</code></pre></div><ul><li>åœ¨é¡¹ç›®æ ¹è·¯å¾„æ–°å¢é…ç½®æ–‡ä»¶ <code>babel.config.js</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        targets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          node<span class="token punctuation">:</span> <span class="token string">'current'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>é‡æ–°å¯åŠ¨æµ‹è¯•</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>yarn <span class="token function">test</span> --watch
</code></pre></div><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨jest"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨jest" aria-hidden="true" class="header-anchor">#</a> ä¸ºä»€ä¹ˆä½¿ç”¨jest</h3> <p>å› ä¸ºè¿™æ˜¯vueå®˜æ–¹å·¥å…·é“¾çš„ä¸€éƒ¨åˆ†, åŒæ—¶ä¹Ÿå¯ä»¥ä¸ºåç»­çš„ç»„ä»¶æµ‹è¯•ä½œå‡†å¤‡ã€‚
<img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g6m6p99ebsj31ak0m877q.jpg" alt=""></p> <p>æ›´å¤šè¯·ç‚¹å‡»æŸ¥çœ‹<a href="https://www.yuque.com/preview/yuque/0/2019/pdf/160590/1560232844122-419cd5a9-5d42-4a35-a266-6d6ea02828b3.pdf" target="_blank" rel="noopener noreferrer">2019-06-04å°¤é›¨æºªçš„vueæŠ€æœ¯åˆ†äº«<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/FEMessage/blog/edit/master/docs/tutorial/test-driven-development-by-jest.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬å®Œå–„æ­¤é¡µé¢</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/blog/docs/tutorial/setup-an-automated-github-workflow.html" class="prev">
          ğŸŒªè‡ªåŠ¨åŒ–çš„Github Workflow
        </a></span> <span class="next"><a href="/blog/docs/tutorial/use-free-https-service.html">
          ğŸ”’å…è´¹å¼€å¯HTTPS
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.79b0d2e1.js" defer></script><script src="/blog/assets/js/2.acf68d8b.js" defer></script><script src="/blog/assets/js/39.63e6dd89.js" defer></script>
  </body>
</html>
