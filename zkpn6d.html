<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>日期 2018-11-18 | 团队博客</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.9957f12e.css" as="style"><link rel="preload" href="/blog/assets/js/app.aa698dae.js" as="script"><link rel="preload" href="/blog/assets/js/2.7a69aa7d.js" as="script"><link rel="preload" href="/blog/assets/js/12.7975cf9a.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.c294fc2a.js"><link rel="prefetch" href="/blog/assets/js/11.3f50dc0f.js"><link rel="prefetch" href="/blog/assets/js/13.edefceba.js"><link rel="prefetch" href="/blog/assets/js/14.62620601.js"><link rel="prefetch" href="/blog/assets/js/3.775224ad.js"><link rel="prefetch" href="/blog/assets/js/4.bb3de599.js"><link rel="prefetch" href="/blog/assets/js/5.fc0d59a7.js"><link rel="prefetch" href="/blog/assets/js/6.151cdefb.js"><link rel="prefetch" href="/blog/assets/js/7.d17606b1.js"><link rel="prefetch" href="/blog/assets/js/8.3ba9042f.js"><link rel="prefetch" href="/blog/assets/js/9.0b52b7b8.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.9957f12e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">团队博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GIT指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/kviksk.html" class="sidebar-link">GIT常用命令</a></li><li><a href="/blog/gus3op.html" class="sidebar-link">GIT最佳实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>软技能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/tbbqx8.html" class="sidebar-link">编程修养</a></li><li><a href="/blog/wuyvak.html" class="sidebar-link">搜索技巧</a></li><li><a href="/blog/yalowt.html" class="sidebar-link">金字塔原理在Github PR中的运用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>编程回忆录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/zkpn6d.html" class="active sidebar-link">交付可用的功能，许下承诺负责到底</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/zkpn6d.html#承诺的压力" class="sidebar-link">承诺的压力</a></li><li class="sidebar-sub-header"><a href="/blog/zkpn6d.html#无法上线的功能价值为零" class="sidebar-link">无法上线的功能价值为零</a></li></ul></li></ul></section></li><li><a href="/blog/bocbyc.html" class="sidebar-link">编码技巧</a></li><li><section class="sidebar-group depth-0"><a href="/blog/bx71vi.html" class="sidebar-heading clickable"><span>Github集成Travis CI</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/cmlu6m.html" class="sidebar-link">经验法则与至理名言</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="日期-2018-11-18"><a href="#日期-2018-11-18" aria-hidden="true" class="header-anchor">#</a> 日期 2018-11-18</h1> <h1 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h1> <p>本文记录了在北京百得利项目的实战经历。</p> <h1 id="正文"><a href="#正文" aria-hidden="true" class="header-anchor">#</a> 正文</h1> <h2 id="承诺的压力"><a href="#承诺的压力" aria-hidden="true" class="header-anchor">#</a> 承诺的压力</h2> <p><span>权限管理的重构与协同设置功能有所相关，我放在一起做了。</span></p><p><span>按照最开始的规划，周二是能上线的。但到了周一，才注意到当初有疏忽的点，协同设置的修改，影响到移动端的客服显示了。当晚召集小伙伴，重新分析一波，确认周二能把相关改动做好。</span></p><p><span>周二那天感受到了，我感受到了时间的压力。</span></p><p><span>当天上午的时候，用户管理还没有完全重构好，但接口已经调通了。考虑到还要在几个环境去测试，还要跟移动端联调，我产生了“先保证功能可用，后面再重构”的想法。</span></p><p><span>这里主要是这样考虑的：上周我信誓旦旦，说这周二能搞定; 如果周二搞不定，那就是打脸了。虽说这个功能并非很重要，这并不影响系统的下单，但这是我的承诺，没有做到，损失的是我的信誉。不能按时完成任务，降低的是我的可信度。所以我周二那天有着“必须搞定”的念头。</span></p><p><span>但同时，我又觉得，这些丑陋的代码不经过整理就上线了，我的内心无法忍受。但如果继续重构，会增加调试时间，可能今天赶不上上线。</span></p><p><span>我很矛盾，导致有些心神不宁，明显感到状态不如上周专心致志。</span></p><p><span>尤其是到了午餐时间，我还想再写一个小时，不想中断编码节奏，但肚子又饿得慌。我知道，如果我继续写，1点多的时候叫个外卖，中午就不休息了，那我前一个小时的质量能得以保证，但下午就崩溃了; 而如果我去吃饭，刚吃完了必须休息一会儿，所以现在的编码状态一定会被打断，得一个多小时会才能恢复，但下午的质量能得以保证。</span></p><p><span>犹豫在三，我选择了先去吃饭。“越是有压力的时候，越要保持正常作息”。</span></p><p><span>吃完了在酒店里，根本睡不着，于是起身去公办室。我隐约觉得这个状态下，接下来很可能会写bug。</span></p><p><span>于是我准备像压力妥协，我说，“先把功能上线吧，代码质量后面再说了”。</span></p><p><span>结果一联调，发现仍有考虑不周全的地方，后端客服查询接口需要增加过滤参数; 预约逻辑也要改，不然影响到下单，无法走流程！</span></p><p><span>查询接口增加参数在可控范围内，但预约失败却是始料不及的。预约功能非常关键，但之前梳理逻辑的时候，居然没考虑到这一点，必须要指出，这里我的失误非常严重。</span></p><p><span>怎么办？我当即做了以下调整：</span></p><ol style="padding-left:30px;"><li><span>首先，接受周二无法上线的事实</span><br></li><li><span>接着，找到开发预约功能的火柴哥，重新梳理一波逻辑，确定明天能搞定</span><br></li><li><span>找到Y经理，告诉他由于之前我考虑不周，影响到预约功能了，需要明天才能上线</span></li><li><span>重新调整心态，继续进行用户管理的重构，不降低代码质量。</span></li></ol><p><span>第3点的秘诀是：调整对方预期，许下新的承诺。这里的关键点是，自己主动找人，而不是等到别人来找你，二者有天壤之别。让别人来找你，然后你才告诉对方这事不能按时完成，你就留下不靠谱的印象。</span></p><p><span></span></p><p><span>第4点是《The clean Coder》里提到的，“越是紧要关头，越是要冷静。战胜压力靠的是你平时遵守的纪律”，“如果你笃行重构，此时要更多地重构”。</span><span style="color:#F5222D;">这标志着我心态转变：从理论到实践，对该价值观的真正确认</span><span>。</span></p><p><span>事实证明，越是时间紧急，越不能想着赶工。因为总有意料之外的事情：到了周三，一切准备就绪了，却发现，原来权限管理本身就有bug，这在旧版本的权限管理就存在的，只是一直没暴露出来，结果又花了好些时间修复。</span></p><p><span>所以前辈说的不错，唯有按部就班，保持井然有序，才是致胜的秘诀。</span></p> <h2 id="无法上线的功能价值为零"><a href="#无法上线的功能价值为零" aria-hidden="true" class="header-anchor">#</a> 无法上线的功能价值为零</h2> <p><span>周二晚上新的权限管理在测试环境可见的时候，我通知了C总，跟他说即将上线新的权限管理，用户体验更佳。C总觉得不错，跟我说“谢谢”，还问我啥时上到生产。我说，等测试完功能没问题就上线。</span></p><p><span>到了周三在测试环境通过测试时，发现分支管理很不合理，想上个线，给feature分支的开发者带来很大负担：分支开发者本地合并主干代码，解决冲突后，再提交到主干，而在那之后feature分支的代码就被污染了; 想该功能单独上线，需要重uat切个分支出来，再cherry-pick feature分支相关的提交记录。</span></p><p><span>这里的关键，我的分支，一共有70+个提交，我得cherry-pick这么多提交，并且之前合并主干遇到冲突, 很多会再遇到一次，得再一次手工解决。</span></p><p><span>我开玩笑说，这特么上个线比上炕费劲多了。</span></p><p><span>我找到Y经理，跟他说，我这么多提交去cherry-pick，很有可能会失误，得想个办法。Y经理说，那就不急着上线呗，你的功能先放一放，到时跟其他功能一起从测试环境同步过去。</span></p><p><span>当时我就想，那好，既然你不着急上线，那我也不着急了。反正我该做的已经做了，剩下的就交给你了，这功能上不了线也怪不了我。</span></p><p><span>我顿时觉得心理轻松了许多。</span></p><p><span>但后来我突然想起到了C总昨天的那句“谢谢”。C总是感受到了我们想把事情做好，不断完善，提供更佳的用户体验的态度而道谢的。如果我把负责推到Y经理身上，认为我只管开发，不管上线，那我是在开空头支票，这不是专业人员应有的态度。而且，</span><span style="color:#F5222D;">从成果产出的角度讲，功能没上线，没有被真正的用户使用到，那么成果产出为零，该功能的价值为零。</span></p><p><span>把这层想明白，我就着手合并代码，开始了我的cherry-pick之旅。我花了一个上午合并代码，解决冲突，然后再写了份cherry-pick操作步骤文档。下午再找到相关开发人员，帮他们cherry-pick一波。大半个下午过去了，代码才准备就绪，上了uat。</span></p><p><span>最终，经过一番细致而繁琐的操作，新的权限管理上线了, 我没食言，</span><span>兑现了承诺</span><span>。</span></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/yalowt.html" class="prev">
          金字塔原理在Github PR中的运用
        </a></span> <span class="next"><a href="/blog/bocbyc.html">
          编码技巧
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.aa698dae.js" defer></script><script src="/blog/assets/js/2.7a69aa7d.js" defer></script><script src="/blog/assets/js/12.7975cf9a.js" defer></script>
  </body>
</html>
