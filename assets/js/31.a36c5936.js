(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{244:function(e,t,a){"use strict";a.r(t);var s=a(2),r=Object(s.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"📦vue组件发布npm最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#📦vue组件发布npm最佳实践","aria-hidden":"true"}},[e._v("#")]),e._v(" 📦vue组件发布npm最佳实践")]),e._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),a("p",[e._v("我们经常使用组件，二次封装或开发新组件，在团队内部使用; 可当我们想通过npm分享组件时，却没了之前的得心应手，本文旨在帮助大家在可以更轻松地发布组件")]),e._v(" "),a("p",[e._v("首先，把vue组件发布到npm这件事可以拆分成两个部分：")]),e._v(" "),a("ol",[a("li",[e._v("在npm上发布一个包")]),e._v(" "),a("li",[e._v("将vue组件打包")])]),e._v(" "),a("h2",{attrs:{id:"npm发包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm发包","aria-hidden":"true"}},[e._v("#")]),e._v(" npm发包")]),e._v(" "),a("p",[e._v("有人说，发包不是一行命令就搞定了么")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" publish\n")])])]),a("p",[e._v("是的，可是还忽略了以下几点：")]),e._v(" "),a("ol",[a("li",[e._v("首先你要在"),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("npmjs"),a("OutboundLink")],1),e._v("上注册一个账号")]),e._v(" "),a("li",[e._v("查看你的"),a("code",[e._v(".npmrc")]),e._v("设置，确保你的registry是https://www.npmjs.com/, 而不是淘宝源")]),e._v(" "),a("li",[e._v("在终端"),a("code",[e._v("npm login")]),e._v("，登录你的账号")])]),e._v(" "),a("p",[e._v("做好以上三点，才可以通过"),a("code",[e._v("npm publish")]),e._v("简单地发布一个包。若要遵循最佳实践，还有一些准备工作要做好，下面将为你讲述")]),e._v(" "),a("h3",{attrs:{id:"完善基本信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完善基本信息","aria-hidden":"true"}},[e._v("#")]),e._v(" 完善基本信息")]),e._v(" "),a("p",[e._v("package.json的以下字段需要注意")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("name")])]),e._v(" "),a("li",[a("code",[e._v("version")])]),e._v(" "),a("li",[a("code",[e._v("description")])]),e._v(" "),a("li",[a("code",[e._v("keywords")])]),e._v(" "),a("li",[a("code",[e._v("author")])]),e._v(" "),a("li",[a("code",[e._v("license")])]),e._v(" "),a("li",[a("code",[e._v("repository")])]),e._v(" "),a("li",[a("code",[e._v("main")])]),e._v(" "),a("li",[a("code",[e._v("unpkg")])]),e._v(" "),a("li",[a("code",[e._v("module")])]),e._v(" "),a("li",[a("code",[e._v("scripts")])]),e._v(" "),a("li",[a("code",[e._v("engines")])])]),e._v(" "),a("p",[a("code",[e._v("name")]),e._v("就是发布到npm上的包名，也即别人安装时输入的名字"),a("code",[e._v("yarn add ${name}")]),e._v(", 包名应该是"),a("code",[e._v("kebab-case")]),e._v(", 即英文单词全小写，中划线分割(lower case and dash-separated)")]),e._v(" "),a("p",[a("code",[e._v("version")]),e._v("是语义化的，"),a("code",[e._v("major.minor.patch")]),e._v(". 如果是"),a("code",[e._v("major")]),e._v("变动，通常意味着不兼容的修改; 如果是"),a("code",[e._v("minor")]),e._v("，意味着添加向后兼容的新功能，如果是"),a("code",[e._v("patch")]),e._v(", 意味着bug的修复。详情见"),a("a",{attrs:{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("semver.org"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("code",[e._v("description")]),e._v("是对包的描述，在"),a("a",{attrs:{href:"https://www.npmjs.com/package/package",target:"_blank",rel:"noopener noreferrer"}},[e._v("npmjs.com"),a("OutboundLink")],1),e._v("上搜索时会显示，有助于用户在搜索时进行筛选")]),e._v(" "),a("p",[a("code",[e._v("keywords")]),e._v(" 同样也是帮助用户查找到你的包")]),e._v(" "),a("p",[a("code",[e._v("author")]),e._v("的格式一般是"),a("code",[e._v("${your name} ${email}")]),e._v(", 当然也可以是一个github地址")]),e._v(" "),a("p",[a("code",[e._v("license")]),e._v("可能很多人会忽略，最好也写上去。至于用哪个，vue的官方项目全是MIT，因此我也是MIT，不纠结")]),e._v(" "),a("p",[a("code",[e._v("repository")]),e._v("的格式参考如下：")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://github.com/FEMessage/el-data-table.git"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("这样在"),a("a",{attrs:{href:"https://www.npmjs.com/package/el-data-table",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm包页面"),a("OutboundLink")],1),e._v("就有会个github的入口")]),e._v(" "),a("p",[a("code",[e._v("main")]),e._v("定义了包的入口文件，在NodeJs环境，语句"),a("code",[e._v("import pkg from 'package-name'")]),e._v("时，其实导入的就是"),a("code",[e._v("main")]),e._v("定义的文件，它可以是"),a("a",{attrs:{href:"http://www.commonjs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CommonJs"),a("OutboundLink")],1),e._v("格式的, 也可以是"),a("a",{attrs:{href:"https://github.com/umdjs/umd",target:"_blank",rel:"noopener noreferrer"}},[e._v("umd"),a("OutboundLink")],1),e._v("格式")]),e._v(" "),a("p",[e._v("需要注意的是，当你把一个包发布到npm上时，它同时也可以在"),a("a",{attrs:{href:"https://unpkg.com/#/",target:"_blank",rel:"noopener noreferrer"}},[e._v("unpkg"),a("OutboundLink")],1),e._v("上获取到。也就是说，你的代码既可能在NodeJs环境也可能浏览器环境执行。为此你需要用"),a("a",{attrs:{href:"https://github.com/umdjs/umd",target:"_blank",rel:"noopener noreferrer"}},[e._v("umd"),a("OutboundLink")],1),e._v("格式打包，并且在package.json定义"),a("code",[e._v("unpkg")]),e._v("字段，一般而言此时它的命名为"),a("code",[e._v("name.min.js")])]),e._v(" "),a("p",[e._v("最后，别忘了定义"),a("code",[e._v("module")]),e._v("或"),a("code",[e._v("jsnext:main")]),e._v("字段，它表示用ES6模块格式打包，给Webpack 2+或Rollup等先进的构建工具来处理。")]),e._v(" "),a("p",[e._v("我们来看一下三个字段的示例：")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dist/el-data-table.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"unpkg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dist/el-data-table.min.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"module"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dist/el-data-table.esm.js"')]),e._v("\n")])])]),a("p",[a("code",[e._v("scripts")]),e._v(" 为了防止出现发包前忘记构建的乌龙事件，定义一下发布前的脚本, 这样每次执行"),a("code",[e._v("npm publish")]),e._v("前都会先执行"),a("code",[e._v("npm run build")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"prepublishOnly"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"npm run build"')]),e._v("\n")])])]),a("p",[a("code",[e._v("engines")]),e._v(" 可以告诉用户运行你的包对NodeJs版本的要求，这是非常重要的，不然你使用了NodeJs新版本特性，却没有定义该字段，导致低版本NodeJs用户运行报错，让人摸不着头脑。")]),e._v(" "),a("h3",{attrs:{id:"定义依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义依赖","aria-hidden":"true"}},[e._v("#")]),e._v(" 定义依赖")]),e._v(" "),a("p",[e._v("当你开发一个项目时，比如一个静态网站或一个单面应用，"),a("strong",[e._v("dependencies")]),e._v("和"),a("strong",[e._v("devDependencies")]),e._v("并没有太多区别，因为你"),a("code",[e._v("npm install")]),e._v(" 或 "),a("code",[e._v("yarn")]),e._v("时，这些依赖都会下载下来，因为你是在开发。")]),e._v(" "),a("p",[e._v("但对于发布到npm的包则不同：")]),e._v(" "),a("p",[a("strong",[e._v("dependencies")]),e._v(" 是运行你的包必须安装的依赖，即当用户"),a("code",[e._v("yarn add my-awesome-package")]),e._v("时，这些依赖也会下载。")]),e._v(" "),a("p",[a("strong",[e._v("devDependencies")]),e._v(" 是开发你的包时需要安装的依赖，比如"),a("code",[e._v("eslint")]),e._v(", "),a("code",[e._v("jest")]),e._v("等开发工具，当用户"),a("code",[e._v("yarn add my-awesome-package")]),e._v(" 时，这些依赖并不会下载！")]),e._v(" "),a("p",[a("strong",[e._v("peerDependencies")]),e._v(" 一般用于开发插件的场景，它要求用户必须预先安装了某些依赖。比如开发"),a("code",[e._v("webpack")]),e._v("的插件，如果你把对"),a("code",[e._v("webpack")]),e._v("的依赖定义成"),a("strong",[e._v("dependencies")]),e._v(", 如果用户安装的"),a("code",[e._v("webpack")]),e._v("跟"),a("strong",[e._v("dependencies")]),e._v("里的"),a("code",[e._v("minor")]),e._v("版本不一致, 则用户"),a("code",[e._v("yarn add my-webpack-plugin")]),e._v("时会把"),a("strong",[e._v("dependencies")]),e._v("定义的"),a("code",[e._v("webpack")]),e._v("也下载下来，也即用户会安装两个"),a("code",[e._v("major")]),e._v("版本相同的"),a("code",[e._v("webpack")]),e._v(", 这就不合适了。")]),e._v(" "),a("p",[e._v("所以说，定义好你的包的依赖，可以让用户安装使用你的包时少点困惑，多些愉悦。")]),e._v(" "),a("h3",{attrs:{id:"忽略文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#忽略文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 忽略文件")]),e._v(" "),a("p",[e._v("如果有 "),a("code",[e._v(".gitignore")]),e._v("文件，则发布时会忽略 "),a("code",[e._v(".gitignore")]),e._v("中定义的文件;  也即这些文件不需要在"),a("code",[e._v(".npmignore")]),e._v("重新定义。如果用"),a("code",[e._v(".gitignore")]),e._v("忽略了"),a("code",[e._v("dist")]),e._v("目录，但发包时又需要发布"),a("code",[e._v("dist")]),e._v("目录，此时可以在package.json定义"),a("code",[e._v("files")]),e._v("字段，这是一个白名单，里面的文件都会被发布出去")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"files"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dist"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("p",[e._v("需要注意的是，子文件夹"),a("code",[e._v(".gitignore")]),e._v("或"),a("code",[e._v(".npmignore")]),e._v("同样有效，而它们会覆盖"),a("code",[e._v("files")]),e._v("字段")]),e._v(" "),a("p",[e._v("另外，有些文件无论如何设置，都不会发布出去：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("node_modules")])]),e._v(" "),a("li",[a("code",[e._v(".git")]),e._v("(包括"),a("code",[e._v(".gitignore")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"readme-md"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#readme-md","aria-hidden":"true"}},[e._v("#")]),e._v(" README.md")]),e._v(" "),a("p",[e._v("别忘了这个文件，写下与包相关的更具体的信息，告诉用户这个包有哪些功能，如何使用。这很重要，用户不会使用一个没有文档说明的包！")]),e._v(" "),a("h3",{attrs:{id:"发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布","aria-hidden":"true"}},[e._v("#")]),e._v(" 发布")]),e._v(" "),a("p",[e._v("一个版本只能发布一次，为了避免每次手动修改"),a("code",[e._v("package.json")]),e._v(", 可以使用"),a("code",[e._v("npm version [major | minor | patch]")]),e._v("命令来更新"),a("code",[e._v("package.json")]),e._v("里的版本")]),e._v(" "),a("h3",{attrs:{id:"打标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打标签","aria-hidden":"true"}},[e._v("#")]),e._v(" 打标签")]),e._v(" "),a("p",[e._v("假设你的包最新版本是"),a("code",[e._v("1.0.0")]),e._v(", 当用户"),a("code",[e._v("yarn add my-awesome-package")]),e._v("或"),a("code",[e._v("yarn add my-awesome-package@1.0.0")]),e._v("时，其实是相当于"),a("code",[e._v("yarn add my-awesome-package@latest")]),e._v(", 即不指定标签安装时，默认安装"),a("code",[e._v("latest")]),e._v("版本。")]),e._v(" "),a("p",[e._v("假设你正在开发"),a("code",[e._v("2.0.0")]),e._v("版本，它还不稳定，你想发布它让用户测试一波，此时又不能让它变成"),a("code",[e._v("latest")]),e._v("版本，不然用户"),a("code",[e._v("yarn add my-awesome-package")]),e._v("时就安装了"),a("code",[e._v("2.0.0")]),e._v("了，那将让用户崩溃。这时该怎么办呢？标签就用上场了。")]),e._v(" "),a("p",[e._v("可以这样发布")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" publish --tag beta\n")])])]),a("p",[e._v("则用户"),a("code",[e._v("yarn add my-awesome-package")]),e._v("安装的是"),a("code",[e._v("1.0.0")]),e._v("版本， "),a("code",[e._v("yarn add my-awesome-package@beta")]),e._v("时，安装的是"),a("code",[e._v("2.0.0")]),e._v("版本，不影响老用户，棒！🎉")]),e._v(" "),a("p",[e._v("记住，你只能对一个版本打一个标签，使用"),a("code",[e._v("npm dist-tag ls")]),e._v(" 可以查看npm包一共打了几个标签")]),e._v(" "),a("h2",{attrs:{id:"打包vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包vue","aria-hidden":"true"}},[e._v("#")]),e._v(" 打包Vue")]),e._v(" "),a("h3",{attrs:{id:"脚手架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚手架","aria-hidden":"true"}},[e._v("#")]),e._v(" 脚手架")]),e._v(" "),a("p",[e._v("经过一番折腾，在"),a("a",{attrs:{href:"https://www.vuemastery.com/conferences/vueconf-2018/5-libraries-you-should-know-about-adam-jahr/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue Conf"),a("OutboundLink")],1),e._v("上找到一个vue组件的打包脚手架("),a("a",{attrs:{href:"https://cn.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue官方文档也有说明"),a("OutboundLink")],1),e._v(")，进行“本土化”修改完善后，已在github开源："),a("a",{attrs:{href:"https://github.com/FEMessage/vue-sfc-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/FEMessage/vue-sfc-cli"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明","aria-hidden":"true"}},[e._v("#")]),e._v(" 说明")]),e._v(" "),a("p",[e._v("我们以开源组件"),a("a",{attrs:{href:"https://github.com/FEMessage/el-data-table",target:"_blank",rel:"noopener noreferrer"}},[e._v("el-data-table"),a("OutboundLink")],1),e._v("为例，解释目录结构及文件")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("├── README.md\n├── build\n│   └── rollup.config.js\n├── dist\n│   ├── el-data-table.esm.js\n│   ├── el-data-table.min.js\n│   └── el-data-table.umd.js\n├── docs\n│   ├── build\n│   └── index.html\n├── package.json\n├── src\n│   ├── el-data-table.vue\n│   └── index.js\n├── styleguide.config.js\n├── "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("test")]),e._v("\n│   └── index.test.js\n└── yarn.lock\n")])])]),a("p",[e._v("先来看三个文件:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("README.md")])]),e._v(" "),a("li",[a("code",[e._v("package.json")])]),e._v(" "),a("li",[a("code",[e._v("yarn.lock")])])]),e._v(" "),a("p",[a("code",[e._v("README.md")]),e._v("与"),a("code",[e._v("package.json")]),e._v("大家都懂，有"),a("code",[e._v("yarn.lock")]),e._v("因为是我们鼓励大家使用"),a("a",{attrs:{href:"https://yarnpkg.com/lang/en/",target:"_blank",rel:"noopener noreferrer"}},[e._v("yarn"),a("OutboundLink")],1),e._v(",  它比"),a("code",[e._v("npm")]),e._v("更快。虽然"),a("code",[e._v("npm")]),e._v(" 6.0号称提速17倍(可以想象6之前是得有多慢😂)，但经测试，还是不如"),a("code",[e._v("yarn")])]),e._v(" "),a("p",[e._v("接下来看"),a("code",[e._v("build")]),e._v(", "),a("code",[e._v("dist")]),e._v(", "),a("code",[e._v("src")]),e._v(" 目录")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("├── build\n│   └── rollup.config.js\n├── dist\n│   ├── el-data-table.esm.js\n│   ├── el-data-table.min.js\n│   └── el-data-table.umd.js\n├── src\n│   ├── el-data-table.vue\n│   └── index.js\n")])])]),a("p",[a("code",[e._v("build")]),e._v(" 目录下放编译时的配置文件，这个跟"),a("code",[e._v("vue-cli 2.x")]),e._v("生成的模板build目录作用是一样的，只不过这里放置的是"),a("code",[e._v("rollup.config.js")]),e._v("。至于为什么用Rollup, 一是因为配置更简单，二是因为它更适合打包类库，当源文件中有"),a("code",[e._v("import lib from 'awesome-lib'")]),e._v("类似的代码时，Rollup并不会把"),a("code",[e._v("awesome-lib")]),e._v("捆绑输出，这正是开发类库或组件需要的特性")]),e._v(" "),a("p",[a("code",[e._v("dist")]),e._v("是输出目录，也有叫"),a("code",[e._v("lib")]),e._v("的，我也纠结了好久。看了一些优秀的开源项目，发现叫"),a("code",[e._v("dist")]),e._v("的比较多，而"),a("code",[e._v("webpack4")]),e._v("默认的输出目录也是"),a("code",[e._v("dist")]),e._v(", 因此决定用"),a("code",[e._v("dist")]),e._v("。至于"),a("code",[e._v("dist")]),e._v("目录下会有三个文件，前文已说过原因。而命名为何不是"),a("code",[e._v("camelcase")]),e._v(", 而是"),a("code",[e._v("kebab-case")]),e._v(", 后面风格指南会说到")]),e._v(" "),a("p",[a("code",[e._v("src")]),e._v("是输入目录。把"),a("code",[e._v("index.js")]),e._v("放在"),a("code",[e._v("src")]),e._v("目录，也是经过一番考虑。也想把"),a("code",[e._v("index.js")]),e._v("跟"),a("code",[e._v("package.json")]),e._v("同级，最终参考了"),a("code",[e._v("webpack4")]),e._v(", 它默认输入是"),a("code",[e._v("src/index.js")]),e._v(", 那就跟主流保持一致。该文件主要工作是把"),a("code",[e._v("src")]),e._v("目录下的vue文件设置成vue的插件。同样，vue文件的命名后面风格指南会说到")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("├── "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("test")]),e._v("\n│   └── index.test.js\n")])])]),a("p",[a("code",[e._v("test")]),e._v("目录下是基于"),a("code",[e._v("jest")]),e._v("及"),a("code",[e._v("vue/test-utils")]),e._v("的单元测试文件，具体教程可参考"),a("a",{attrs:{href:"https://vue-test-utils.vuejs.org/guides/#testing-single-file-components-with-jest",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("├── docs\n│   ├── build\n│   └── index.html\n├── styleguide.config.js\n")])])]),a("p",[a("code",[e._v("docs")]),e._v("存放的是组件的api文档，包含"),a("code",[e._v("props")]),e._v(", "),a("code",[e._v("slot")]),e._v(", "),a("code",[e._v("event")]),e._v("等内容的说明，使用的是"),a("a",{attrs:{href:"https://www.npmjs.com/package/vue-styleguidist",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue-styleguidist"),a("OutboundLink")],1),e._v("作为vue组件文档生成工具。为啥叫 "),a("code",[e._v("docs")]),e._v("呢，因为"),a("code",[e._v("Github Pages")]),e._v("支持从"),a("code",[e._v("master")]),e._v("分支的"),a("code",[e._v("docs")]),e._v("目录读取文件，在仓库"),a("code",[e._v("Settings")]),e._v("里选择"),a("code",[e._v("Github Pages")]),e._v("的"),a("code",[e._v("Source")]),e._v("即可, 具体看"),a("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"风格指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#风格指南","aria-hidden":"true"}},[e._v("#")]),e._v(" 风格指南")]),e._v(" "),a("p",[e._v("vue组件把template/script/style都放在一个vue文件里，这个称之为单文件组件，"),a("code",[e._v("Single File Component")]),e._v("，缩写为SFC, 这就是"),a("a",{attrs:{href:"https://github.com/FEMessage/vue-sfc-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue-sfc-cli"),a("OutboundLink")],1),e._v("中sfc的寓意")]),e._v(" "),a("p",[e._v("通读"),a("a",{attrs:{href:"https://cn.vuejs.org/v2/style-guide/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("vue官方风格指南"),a("OutboundLink")],1),e._v(",  由于我们是"),a("code",[e._v("kebab-case")]),e._v("的重度用户，因此我们更看重的是在多个项目中保持相同的大小写规则，以下是摘取的适用于我们团队协作习惯的指南：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/style-guide/#%E7%BB%84%E4%BB%B6%E5%90%8D%E4%B8%BA%E5%A4%9A%E4%B8%AA%E5%8D%95%E8%AF%8D-%E5%BF%85%E8%A6%81",target:"_blank",rel:"noopener noreferrer"}},[e._v("组件名，应该多个单词"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("这样做可以避免跟现有的以及未来的 HTML 元素"),a("a",{attrs:{href:"http://w3c.github.io/webcomponents/spec/custom/#valid-custom-element-name",target:"_blank",rel:"noopener noreferrer"}},[e._v("相冲突"),a("OutboundLink")],1),e._v("，因为所有的 HTML 元素名称都是单个单词的")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/style-guide/#%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90",target:"_blank",rel:"noopener noreferrer"}},[e._v("单文件组件的文件名应该要么始终是单词大写开头 (PascalCase)，要么始终是横线连接 (kebab-case)"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("我们选择使用"),a("code",[e._v("kebab-case")])]),e._v(" "),a("p",[e._v("好例子：")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("components/\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("- my-component.vue\n")])])]),a("ul",[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/style-guide/#%E6%A8%A1%E6%9D%BF%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E5%90%8D%E5%A4%A7%E5%B0%8F%E5%86%99-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90",target:"_blank",rel:"noopener noreferrer"}},[e._v("在 DOM 模板(template)中总是 kebab-case 的"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("好例子:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("-- template --"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("my-component"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/my-component"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),a("ul",[a("li",[e._v("[JS/JSX 中的组件名应该始终是 PascalCase 的，尽管在较为简单的应用中只使用Vue.component 进行全局组件注册时，可以使用 kebab-case 字符串](JS/JSX 中的组件名应该始终是 PascalCase 的，尽管在较为简单的应用中只使用Vue.component 进行全局组件注册时，可以使用 kebab-case 字符串)")])]),e._v(" "),a("p",[e._v("这里我们选择使用"),a("code",[e._v("PascalCase")]),e._v(", 因为在编程语言里，"),a("code",[e._v("kebab-case")]),e._v("并不是最佳实践。 也即，在非编程语言的范围，我们能用"),a("code",[e._v("kebab-case")]),e._v("就用")]),e._v(" "),a("p",[e._v("好例子:")]),e._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[e._v("Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'MyComponent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" MyComponent "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./my-component.vue'")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("default")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'MyComponent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("综上所述，就可以明白前文中el-data-table的文件命名风格为"),a("code",[e._v("kebab-case")]),e._v("的原因了")]),e._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://hackernoon.com/how-to-publish-your-package-on-npm-7fc1f5aae600",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to publish your package on npm"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/module-best-practices",target:"_blank",rel:"noopener noreferrer"}},[e._v("module-best-practices"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/voorhoede/npm-style-guide",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm-style-guide"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("semver.org"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://unpkg.com/#/",target:"_blank",rel:"noopener noreferrer"}},[e._v("unpkg"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/umdjs/umd",target:"_blank",rel:"noopener noreferrer"}},[e._v("umd"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.npmjs.com/misc/scripts",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm scripts"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.npmjs.com/misc/developers#keeping-files-out-of-your-package",target:"_blank",rel:"noopener noreferrer"}},[e._v(".npmignore"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.vuemastery.com/conferences/vueconf-2018/5-libraries-you-should-know-about-adam-jahr/",target:"_blank",rel:"noopener noreferrer"}},[e._v("2018 Vue Conf"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue Cookbook"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/style-guide/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue Style Guide"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/appleboy/npm-vs-yarn",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm-vs-yarn"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github Pages"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"注"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注","aria-hidden":"true"}},[e._v("#")]),e._v(" 注")]),e._v(" "),a("p",[e._v("本文最早发布在掘金，现迁移至"),a("a",{attrs:{href:"https://github.com/levy9527/blog/issues/2",target:"_blank",rel:"noopener noreferrer"}},[e._v("github"),a("OutboundLink")],1),e._v("。")])])},[],!1,null,null,null);t.default=r.exports}}]);