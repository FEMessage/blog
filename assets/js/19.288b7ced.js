(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{231:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"组件研发指南（三）：开源协作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件研发指南（三）：开源协作","aria-hidden":"true"}},[t._v("#")]),t._v(" 组件研发指南（三）：开源协作")]),t._v(" "),s("h1",{attrs:{id:"开源准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开源准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 开源准备")]),t._v(" "),s("h2",{attrs:{id:"前提"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提","aria-hidden":"true"}},[t._v("#")]),t._v(" 前提")]),t._v(" "),s("p",[t._v("已经在私服发布，并在项目中验证")]),t._v(" "),s("h2",{attrs:{id:"checklist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checklist","aria-hidden":"true"}},[t._v("#")]),t._v(" checklist")]),t._v(" "),s("ul",[s("li",[t._v("[ ] 在 github 新建仓库")]),t._v(" "),s("li",[t._v("[ ] 描述是英文，首字母大写，最好开头有 emoji")])]),t._v(" "),s("p",[t._v("参考现有仓库\n"),s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nizcjynzj31jm0hkq68.jpg",alt:"image.png"}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("[ ] 提供两份README：\nREADME.md 是英文的，顶部含一个链接跳到中文\nREADME-zh.md 中文文档")])]),t._v(" "),s("li",[s("p",[t._v("[ ] docs 下的 demo 文档，在同一份中，中英双语的")])]),t._v(" "),s("li",[s("p",[t._v("[ ] docs 下的 guide-xxx 有 中/英 两份")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 在文档中添加 contributors")])]),t._v(" "),s("li",[s("p",[t._v("[ ] package.json version 字段修改成 1.0.0")])]),t._v(" "),s("li",[s("p",[t._v("[ ] package.json description 字段补充英文说明")])]),t._v(" "),s("li",[s("p",[t._v("[ ] rm -fr .git 删除在 gitlab 的提交记录")])]),t._v(" "),s("li",[s("p",[t._v("[ ] git init")])]),t._v(" "),s("li",[s("p",[t._v("[ ] git add .* *")])]),t._v(" "),s("li",[s("p",[t._v("[ ] git commit -m ' 🎉 open source'")])]),t._v(" "),s("li",[s("p",[t._v("[ ] git remote add origin ${github_repo_url}")])]),t._v(" "),s("li",[s("p",[t._v("[ ] git checkout -b dev")])]),t._v(" "),s("li",[s("p",[t._v("[ ] git push origin dev:dev")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 在github设置默认分支为 dev")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 在 travis ci 设置环境变量： NPM_TOKEN GITHUB_TOKEN DINGTALK_ROBOT_TOKEN")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 合并master分支")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 把 gitlab 的项目 归档掉")])])]),t._v(" "),s("h1",{attrs:{id:"开源维护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开源维护","aria-hidden":"true"}},[t._v("#")]),t._v(" 开源维护")]),t._v(" "),s("h2",{attrs:{id:"issue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#issue","aria-hidden":"true"}},[t._v("#")]),t._v(" issue")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj50gbvtj31ja0fc41h.jpg",alt:"image.png"}}),t._v(" "),s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj57s11lj317k0cwmym.jpg",alt:"image.png"}})]),t._v(" "),s("h3",{attrs:{id:"bug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bug","aria-hidden":"true"}},[t._v("#")]),t._v(" bug")]),t._v(" "),s("p",[t._v("按照模板填写描述")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Describe the bug")]),t._v("\nA clear and concise description of what the bug is.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Screenshots")]),t._v("\nIf applicable, add screenshots to help explain your problem.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" To Reproduce")]),t._v("\nSteps to reproduce the behavior:\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" Go to '...'\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" Click on '....'\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("3.")]),t._v(" Scroll down to '....'\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("4.")]),t._v(" See error\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Expected behavior")]),t._v("\nA clear and concise description of what you expected to happen.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" environment information")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Version [e.g. 22]\n "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" OS: [e.g. iOS]\n "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Browser [e.g. chrome, safari]\n")])])]),s("h2",{attrs:{id:"pull-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pull-request","aria-hidden":"true"}},[t._v("#")]),t._v(" pull request")]),t._v(" "),s("h3",{attrs:{id:"项目验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目验证","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目验证")]),t._v(" "),s("p",[t._v("在组件里，内置的是单元测试，新增了功能或修复了bug，通过单元测试后，还不能掉以轻心，需要到项目中去验证一下。")]),t._v(" "),s("p",[t._v("首先 "),s("code",[t._v("yarn build:umd")]),t._v(" 生成最新的 dist 内容")]),t._v(" "),s("p",[t._v("再使用 "),s("code",[t._v("yarn link")]),t._v(" ，即可实现不发包，在本地对新功能进行测试。")]),t._v(" "),s("p",[t._v("验证之后，合并PR时才更有信心，也即此举能提高PR合并的成功率。")]),t._v(" "),s("p",[t._v("下面附下 "),s("code",[t._v("yarn link")]),t._v(" 操作说明。")]),t._v(" "),s("p",[t._v("假设项目路径为 "),s("code",[t._v("/path/poject")]),t._v(" ，组件名为 "),s("code",[t._v("my-component")]),t._v(" ，组件所在路径为 "),s("code",[t._v("/path/my-component")]),t._v("  则相关操作为：")]),t._v(" "),s("ul",[s("li",[t._v("cd /path/my-component")]),t._v(" "),s("li",[t._v("yarn link")]),t._v(" "),s("li",[t._v("cd /path/project")]),t._v(" "),s("li",[t._v("yarn link my-component")])]),t._v(" "),s("p",[t._v("则可以在项目中通过引用本地组件")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MyComponent "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-component'")]),t._v("\n")])])]),s("p",[t._v("验证完毕，记得在项目中清除link")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://yarnpkg.com/zh-Hant/docs/cli/link")]),t._v("\nyarn unlink my"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("component\n")])])]),s("p",[t._v("想要查看项目中link状态，使用以下命令")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://github.com/yarnpkg/yarn/issues/1722")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -l node_modules "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -l node_modules/@* "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" ^l\n")])])]),s("h3",{attrs:{id:"gihub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gihub","aria-hidden":"true"}},[t._v("#")]),t._v(" gihub")]),t._v(" "),s("p",[t._v("在项目中验证过后，再上 github 提 PR\n"),s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj5divggj31ke0dsacw.jpg",alt:"image.png"}})]),t._v(" "),s("p",[t._v("基于 dev 分支\n"),s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj5ojnpzj31ik08emyu.jpg",alt:"image.png"}})]),t._v(" "),s("p",[t._v("按照模板提交")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Why")]),t._v("\nWhy is this change required? What problem does it solve?\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" How")]),t._v("\nDescribe your steps:\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" one step\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" two step...\n\nYou may use xmind or other mind map to show you logic\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Test")]),t._v("\nShow your test case\n\nyou'd better show "),s("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("`before`")]),t._v(" and "),s("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("`after`")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Docs")]),t._v("\nIt there requires a change to the documentation？\n")])])])])},[],!1,null,null,null);a.default=n.exports}}]);