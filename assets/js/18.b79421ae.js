(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{227:function(t,a,e){"use strict";e.r(a);var s=e(2),n=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"组件研发指南（三）：开源协作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件研发指南（三）：开源协作","aria-hidden":"true"}},[t._v("#")]),t._v(" 组件研发指南（三）：开源协作")]),t._v(" "),e("h1",{attrs:{id:"开源准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开源准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 开源准备")]),t._v(" "),e("h2",{attrs:{id:"前提"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提","aria-hidden":"true"}},[t._v("#")]),t._v(" 前提")]),t._v(" "),e("p",[t._v("已经在私服发布，并在项目中验证")]),t._v(" "),e("h2",{attrs:{id:"checklist"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#checklist","aria-hidden":"true"}},[t._v("#")]),t._v(" checklist")]),t._v(" "),e("ul",[e("li",[t._v("[ ] 在 github 新建仓库")]),t._v(" "),e("li",[t._v("[ ] 描述是英文，首字母大写，最好开头有 emoji")])]),t._v(" "),e("p",[t._v("参考现有仓库\n"),e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nizcjynzj31jm0hkq68.jpg",alt:"image.png"}})]),t._v(" "),e("ul",[e("li",[e("p",[t._v("[ ] 提供两份README：\nREADME.md 是英文的，顶部含一个链接跳到中文\nREADME-zh.md 中文文档")])]),t._v(" "),e("li",[e("p",[t._v("[ ] docs 下的 demo 文档，在同一份中，中英双语的")])]),t._v(" "),e("li",[e("p",[t._v("[ ] docs 下的 guide-xxx 有 中/英 两份")])]),t._v(" "),e("li",[e("p",[t._v("[ ] 在文档中添加 contributors")])]),t._v(" "),e("li",[e("p",[t._v("[ ] package.json version 字段修改成 1.0.0")])]),t._v(" "),e("li",[e("p",[t._v("[ ] package.json description 字段补充英文说明")])]),t._v(" "),e("li",[e("p",[t._v("[ ] rm -fr .git 删除在 gitlab 的提交记录")])]),t._v(" "),e("li",[e("p",[t._v("[ ] git init")])]),t._v(" "),e("li",[e("p",[t._v("[ ] git add .* *")])]),t._v(" "),e("li",[e("p",[t._v("[ ] git commit -m ' 🎉 open source'")])]),t._v(" "),e("li",[e("p",[t._v("[ ] git remote add origin ${github_repo_url}")])]),t._v(" "),e("li",[e("p",[t._v("[ ] git checkout -b dev")])]),t._v(" "),e("li",[e("p",[t._v("[ ] git push origin dev:dev")])]),t._v(" "),e("li",[e("p",[t._v("[ ] 在github设置默认分支为 dev")])]),t._v(" "),e("li",[e("p",[t._v("[ ] 在 travis ci 设置环境变量： NPM_TOKEN GITHUB_TOKEN DINGTALK_ROBOT_TOKEN")])]),t._v(" "),e("li",[e("p",[t._v("[ ] 合并master分支")])]),t._v(" "),e("li",[e("p",[t._v("[ ] 把 gitlab 的项目 归档掉")])])]),t._v(" "),e("h1",{attrs:{id:"开源维护"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开源维护","aria-hidden":"true"}},[t._v("#")]),t._v(" 开源维护")]),t._v(" "),e("h2",{attrs:{id:"issue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#issue","aria-hidden":"true"}},[t._v("#")]),t._v(" issue")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj50gbvtj31ja0fc41h.jpg",alt:"image.png"}}),t._v(" "),e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj57s11lj317k0cwmym.jpg",alt:"image.png"}})]),t._v(" "),e("h3",{attrs:{id:"bug"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bug","aria-hidden":"true"}},[t._v("#")]),t._v(" bug")]),t._v(" "),e("p",[t._v("按照模板填写描述")]),t._v(" "),e("div",{staticClass:"language-markdown extra-class"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Describe the bug")]),t._v("\nA clear and concise description of what the bug is.\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Screenshots")]),t._v("\nIf applicable, add screenshots to help explain your problem.\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" To Reproduce")]),t._v("\nSteps to reproduce the behavior:\n"),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" Go to '...'\n"),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" Click on '....'\n"),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("3.")]),t._v(" Scroll down to '....'\n"),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("4.")]),t._v(" See error\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Expected behavior")]),t._v("\nA clear and concise description of what you expected to happen.\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" environment information")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Version [e.g. 22]\n "),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" OS: [e.g. iOS]\n "),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Browser [e.g. chrome, safari]\n")])])]),e("h2",{attrs:{id:"pull-request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-request","aria-hidden":"true"}},[t._v("#")]),t._v(" pull request")]),t._v(" "),e("h3",{attrs:{id:"项目验证"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目验证","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目验证")]),t._v(" "),e("p",[t._v("在组件里，内置的是单元测试，新增了功能或修复了bug，通过单元测试后，还不能掉以轻心，需要到项目中去验证一下。")]),t._v(" "),e("p",[t._v("首先 "),e("code",[t._v("yarn build:umd")]),t._v(" 生成最新的 dist 内容")]),t._v(" "),e("p",[t._v("再使用 "),e("code",[t._v("yarn link")]),t._v(" ，即可实现不发包，在本地对新功能进行测试。")]),t._v(" "),e("p",[t._v("验证之后，合并PR时才更有信心，也即此举能提高PR合并的成功率。")]),t._v(" "),e("p",[t._v("下面附下 "),e("code",[t._v("yarn link")]),t._v(" 操作说明。")]),t._v(" "),e("p",[t._v("假设项目路径为 "),e("code",[t._v("/path/poject")]),t._v(" ，组件名为 "),e("code",[t._v("my-component")]),t._v(" ，组件所在路径为 "),e("code",[t._v("/path/my-component")]),t._v("  则相关操作为：")]),t._v(" "),e("ul",[e("li",[t._v("cd /path/my-component")]),t._v(" "),e("li",[t._v("yarn link")]),t._v(" "),e("li",[t._v("cd /path/project")]),t._v(" "),e("li",[t._v("yarn link my-component")])]),t._v(" "),e("p",[t._v("则可以在项目中通过引用本地组件")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MyComponent "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-component'")]),t._v("\n")])])]),e("p",[t._v("更多具体说明请查看 "),e("a",{attrs:{href:"https://yarnpkg.com/zh-Hant/docs/cli/link",target:"_blank",rel:"noopener noreferrer"}},[t._v("yarn 文档"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"gihub"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gihub","aria-hidden":"true"}},[t._v("#")]),t._v(" gihub")]),t._v(" "),e("p",[t._v("在项目中验证过后，再上 github 提 PR\n"),e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj5divggj31ke0dsacw.jpg",alt:"image.png"}})]),t._v(" "),e("p",[t._v("基于 dev 分支\n"),e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj5ojnpzj31ik08emyu.jpg",alt:"image.png"}})]),t._v(" "),e("p",[t._v("按照模板提交")]),t._v(" "),e("div",{staticClass:"language-markdown extra-class"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Why")]),t._v("\nWhy is this change required? What problem does it solve?\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" How")]),t._v("\nDescribe your steps:\n"),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" one step\n"),e("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" two step...\n\nYou may use xmind or other mind map to show you logic\n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Test")]),t._v("\nShow your test case\n\nyou'd better show "),e("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("`before`")]),t._v(" and "),e("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("`after`")]),t._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token title important"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" Docs")]),t._v("\nIt there requires a change to the documentation？\n")])])]),e("h3",{attrs:{id:"pr技巧"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pr技巧","aria-hidden":"true"}},[t._v("#")]),t._v(" PR技巧")]),t._v(" "),e("p",[t._v("参考文章："),e("a",{attrs:{href:"https://deliveroo.engineering/2017/09/06/play-pull-request-roulette.html#ideas-to-make-your-prs-more-review-friendly",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://deliveroo.engineering/2017/09/06/play-pull-request-roulette.html#ideas-to-make-your-prs-more-review-friendly"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("其中最重要的一点：不要一次提交一个很大改动的PR，否则别人很难 review，要学会拆分步骤。")]),t._v(" "),e("p",[t._v("下面是一个 PR 示例：")]),t._v(" "),e("p",[t._v("拆分前\n"),e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj6ned4yj319i07q0um.jpg",alt:"image.png"}})]),t._v(" "),e("p",[t._v("拆分后\n"),e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj5z3bq1j31ca0len2j.jpg",alt:"image.png"}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6gy1g6nj6vup9jj313y08e769.jpg",alt:"image.png"}}),t._v("\n每个 PR 改动的文件少了，这样 review 起来就更容易了。")])])},[],!1,null,null,null);a.default=n.exports}}]);