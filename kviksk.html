<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前言 | 团队博客</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.9957f12e.css" as="style"><link rel="preload" href="/blog/assets/js/app.5ecd04e8.js" as="script"><link rel="preload" href="/blog/assets/js/2.7a69aa7d.js" as="script"><link rel="preload" href="/blog/assets/js/10.88739779.js" as="script"><link rel="prefetch" href="/blog/assets/js/11.0ce02956.js"><link rel="prefetch" href="/blog/assets/js/12.36f8af10.js"><link rel="prefetch" href="/blog/assets/js/13.e452ae47.js"><link rel="prefetch" href="/blog/assets/js/14.85d14865.js"><link rel="prefetch" href="/blog/assets/js/15.5f8083c4.js"><link rel="prefetch" href="/blog/assets/js/3.4a4f9563.js"><link rel="prefetch" href="/blog/assets/js/4.bb3de599.js"><link rel="prefetch" href="/blog/assets/js/5.6800896f.js"><link rel="prefetch" href="/blog/assets/js/6.7ce7dc99.js"><link rel="prefetch" href="/blog/assets/js/7.f378d7ae.js"><link rel="prefetch" href="/blog/assets/js/8.a265be1a.js"><link rel="prefetch" href="/blog/assets/js/9.28053ab4.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.9957f12e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">团队博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>GIT指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/kviksk.html" class="active sidebar-link">GIT常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/kviksk.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#增强" class="sidebar-link">增强</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#本地提交" class="sidebar-link">本地提交</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#分支管理" class="sidebar-link">分支管理</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#远程仓库" class="sidebar-link">远程仓库</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#高级" class="sidebar-link">高级</a></li><li class="sidebar-sub-header"><a href="/blog/kviksk.html#其他" class="sidebar-link">其他</a></li></ul></li><li><a href="/blog/gus3op.html" class="sidebar-link">GIT最佳实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>软技能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/tbbqx8.html" class="sidebar-link">编程修养</a></li><li><a href="/blog/wuyvak.html" class="sidebar-link">搜索技巧</a></li><li><a href="/blog/yalowt.html" class="sidebar-link">金字塔原理在Github PR中的运用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>编程回忆录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/zkpn6d.html" class="sidebar-link">交付可用的功能，许下承诺负责到底</a></li></ul></section></li><li><a href="/blog/bocbyc.html" class="sidebar-link">编码技巧</a></li><li><section class="sidebar-group depth-0"><a href="/blog/bx71vi.html" class="sidebar-heading clickable"><span>Github集成Travis CI</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/cmlu6m.html" class="sidebar-link">经验法则与至理名言</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>这里列举常见场景，并给出相应解决方案</p><p>约定： 下文代码块中<code>${}</code>里面表示的是变量，具体值视情况而定，其余的都是正确可执行的命令。</p> <h2 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h2> <p>Mac/Linux 用户 执行以下操作</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vi</span> ~/.gitconfig 
</code></pre></div><p>Windows用户在桌面用户文件夹下有个.gitconfig隐藏文件，直接修改即可</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/210664/1547175144703-dfccb8e7-55f7-4be0-a030-2c5ff2bdc1c5.png#align=left&amp;display=inline&amp;height=565&amp;originHeight=805&amp;originWidth=1179&amp;status=done&amp;width=827" style="max-width:600px;width:827px;"></p><p>补充以下内容</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>alias<span class="token punctuation">]</span>
 st <span class="token operator">=</span> status
 cm <span class="token operator">=</span> commit
 br <span class="token operator">=</span> branch
 co <span class="token operator">=</span> checkout
 <span class="token function">ps</span> <span class="token operator">=</span> push 
</code></pre></div><h2 id="增强"><a href="#增强" aria-hidden="true" class="header-anchor">#</a> 增强</h2> <p>Mac或Linux用户，推荐安装<a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank">https://github.com/robbyrussell/oh-my-zsh</a>，增强命令行体验。</p> <h2 id="本地提交"><a href="#本地提交" aria-hidden="true" class="header-anchor">#</a> 本地提交</h2> <h3 id="取消未暂存的修改"><a href="#取消未暂存的修改" aria-hidden="true" class="header-anchor">#</a> 取消未暂存的修改</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 恢复单个文件</span>
<span class="token function">git</span> checkout -- <span class="token variable">${file}</span>

<span class="token comment"># 恢复目录下所有文件</span>
<span class="token function">git</span> checkout -- <span class="token keyword">.</span> 
</code></pre></div><h3 id="取消暂存"><a href="#取消暂存" aria-hidden="true" class="header-anchor">#</a> 取消暂存</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> reset HEAD 
</code></pre></div><h3 id="取消提交"><a href="#取消提交" aria-hidden="true" class="header-anchor">#</a> 取消提交</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> reset HEAD^1 
</code></pre></div><p>或者</p> <div class="language-undefined extra-class"><pre class="language-text"><code># 查看提交的hash
git log
# 使用相应的hash回滚
git reset ${hash} 
</code></pre></div><h3 id="遗漏提交"><a href="#遗漏提交" aria-hidden="true" class="header-anchor">#</a> 遗漏提交</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit --amend 
</code></pre></div><h3 id="暂存修改"><a href="#暂存修改" aria-hidden="true" class="header-anchor">#</a> 暂存修改</h3> <p>适用于当前功能开发并不完整，不能产生一次提交，但却要开发另外功能的场景</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> stash save <span class="token string">'<span class="token variable">${msg}</span>'</span> 
</code></pre></div><h3 id="恢复暂存"><a href="#恢复暂存" aria-hidden="true" class="header-anchor">#</a> 恢复暂存</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> stash pop 
</code></pre></div><h2 id="分支管理"><a href="#分支管理" aria-hidden="true" class="header-anchor">#</a> 分支管理</h2> <h3 id="创建分支"><a href="#创建分支" aria-hidden="true" class="header-anchor">#</a> 创建分支</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout -b <span class="token variable">${branch}</span> 
</code></pre></div><h3 id="查看远程分支"><a href="#查看远程分支" aria-hidden="true" class="header-anchor">#</a> 查看远程分支</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> branch --remote

<span class="token comment"># 或者</span>
<span class="token function">git</span> branch -r 
</code></pre></div><h3 id="根据远程分支创建分支"><a href="#根据远程分支创建分支" aria-hidden="true" class="header-anchor">#</a> 根据远程分支创建分支</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 保证分支信息拉取下来</span>
<span class="token function">git</span> pull
<span class="token comment"># 查看远程分支信息</span>
<span class="token function">git</span> branch -r
<span class="token comment"># 创建会追踪远程分支的本地分支</span>
<span class="token function">git</span> checkout -t origin/<span class="token variable">${branch}</span> 
</code></pre></div><p>注意上面的完整命令为</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout -b <span class="token variable">${local_branch}</span> -t origin/<span class="token variable">${branch}</span> 
</code></pre></div><p>可以省略 <code>-b ${local_branch}</code></p> <h3 id="创建干净历史分支"><a href="#创建干净历史分支" aria-hidden="true" class="header-anchor">#</a> 创建干净历史分支</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> checkout --orphan <span class="token variable">${branch}</span> 
</code></pre></div><h2 id="远程仓库"><a href="#远程仓库" aria-hidden="true" class="header-anchor">#</a> 远程仓库</h2> <h3 id="浅克隆"><a href="#浅克隆" aria-hidden="true" class="header-anchor">#</a> 浅克隆</h3> <p>适用于仓库很大，对过往历史不关心，想快速克隆的场景。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone --depth<span class="token operator">=</span>1 <span class="token variable">${repo_url}</span> 
</code></pre></div><h3 id="强行推送"><a href="#强行推送" aria-hidden="true" class="header-anchor">#</a> 强行推送</h3> <p>适用于本地开发了一段时间，最近才在代码托管平台上初始化远程仓库的场景</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 谨慎：本地master分支会覆盖远程master分支！</span>
<span class="token function">git</span> push --force 
</code></pre></div><h3 id="取消错误的推送"><a href="#取消错误的推送" aria-hidden="true" class="header-anchor">#</a> 取消错误的推送</h3> <p>适用于推送了错误的提交后, 想取消该推送的场景</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 更新代码</span>
<span class="token comment"># 一定要更新最新的代码! 以免覆盖掉其他协作者的推送!</span>
<span class="token function">git</span> pull

<span class="token comment"># 查看提交的hash</span>
<span class="token function">git</span> log

<span class="token comment"># 使用相应的hash回滚</span>
<span class="token comment"># 注意: 回滚后 在${hash}之后提交的代码 都会在 Changes to be committed 中</span>
<span class="token function">git</span> reset <span class="token variable">${hash}</span>

<span class="token comment"># 覆盖远程仓库的代码</span>
<span class="token function">git</span> push --force 
</code></pre></div><h2 id="高级"><a href="#高级" aria-hidden="true" class="header-anchor">#</a> 高级</h2> <h3 id="cherry-pick"><a href="#cherry-pick" aria-hidden="true" class="header-anchor">#</a> cherry-pick</h3> <p>1.checkout目标分支(target branch)</p><p>2.在源分支(source  branch)获取revision number</p><p><img src="https://cdn.nlark.com/yuque/0/2018/png/160590/1542699698608-3b2be42b-2148-4355-a76e-dc259172faeb.png#align=left&amp;display=inline&amp;height=261&amp;originHeight=724&amp;originWidth=2076&amp;status=done&amp;width=747" style="max-width:600px;width:747px;"></p><p>3.开始cherry-pick</p><p>输入命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> cherry-pick df2612cf167ebaf5e743042477942b95bf15f33d b910c946f8d3dedbb33c2478fceda53867e77000 0737f6f4eb35cf79a3d775f7e05f39a2e1bd65d9 f99c68db44102f28a2a3652103ad94733092c788 9c5cba2ac3ba9b9870d57ac8a59d83333b6a3623 2659bfeae32bd3ca6a574669359248e631e750fd 4d7fa72438d20d1c5917dc9b234d90ea791fd7c5 
</code></pre></div><p>4.解决冲突</p><p>如果遇到冲突，会提示，解决冲突后</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> add <span class="token variable">${冲突的文件}</span> 
</code></pre></div><p>5.继续cherry-pick</p><p>之后会提示，继续操作</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> cherry-pick --continue 
</code></pre></div><p>如再遇到冲突，重复4，5</p><p>6.结束</p> <h3 id="merge-unrelated-histories"><a href="#merge-unrelated-histories" aria-hidden="true" class="header-anchor">#</a> merge unrelated histories</h3> <p>可以使用 <span style="color:#242729;"><span style="background-color:#EFF0F1;">--allow-unrelated-histories</span></span></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> merge --allow-unrelated-histories 
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> pull origin <span class="token variable">${branch}</span> --allow-unrelated-histories 
</code></pre></div><h3 id="根据文件搜索历史"><a href="#根据文件搜索历史" aria-hidden="true" class="header-anchor">#</a> 根据文件搜索历史</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> log --all --full-history -- package-lock.json 
</code></pre></div><h3 id="从所有提交中删除一个文件"><a href="#从所有提交中删除一个文件" aria-hidden="true" class="header-anchor">#</a> 从所有提交中删除一个文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> filter-branch --tree-filter <span class="token string">&quot;rm -rf package-lock.json&quot;</span> --prune-empty -- --all 
</code></pre></div><p>如果代码已经推送到了远程仓库，还需要强制推送</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> push -f 
</code></pre></div><h2 id="其他"><a href="#其他" aria-hidden="true" class="header-anchor">#</a> 其他</h2> <h3 id="记住账号密码"><a href="#记住账号密码" aria-hidden="true" class="header-anchor">#</a> 记住账号密码</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 输入下列命令后，再输入一次账号密码即可</span>
<span class="token function">git</span> config --global credential.helper store 
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/gus3op.html">
          GIT最佳实践
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.5ecd04e8.js" defer></script><script src="/blog/assets/js/2.7a69aa7d.js" defer></script><script src="/blog/assets/js/10.88739779.js" defer></script>
  </body>
</html>
